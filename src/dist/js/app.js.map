{"version":3,"sources":["webpack:///webpack/bootstrap 57ce80946e3fd7169ba7","webpack:///delegated ./node_modules/babel-polyfill/lib/index.js from dll-reference react_7de69c5da675c4deed75","webpack:///external \"react_7de69c5da675c4deed75\"","webpack:///./app/main.js","webpack:///delegated ./node_modules/react/react.js from dll-reference react_7de69c5da675c4deed75","webpack:///delegated ./node_modules/react-dom/index.js from dll-reference react_7de69c5da675c4deed75","webpack:///delegated ./node_modules/react-redux/lib/index.js from dll-reference react_7de69c5da675c4deed75","webpack:///delegated ./node_modules/url-parse/index.js from dll-reference react_7de69c5da675c4deed75","webpack:///delegated ./node_modules/qs/lib/index.js from dll-reference react_7de69c5da675c4deed75","webpack:///./app/menu.js","webpack:///./app/redux/actions/course.js","webpack:///./app/Blackboard.js","webpack:///./app/redux/actions/draw.js","webpack:///./app/util/dimensions.js","webpack:///./app/data/apis.js","webpack:///./app/Dropbox.js","webpack:///./app/Markdown.js","webpack:///./app/util/data_helper.js","webpack:///./app/Fiddle.js","webpack:///./app/redux/actions/code.js","webpack:///./app/AudioRecorder.js","webpack:///./app/util/SoundMeter.js","webpack:///./app/ColorPicker.js","webpack:///./app/redux/store/init.js","webpack:///delegated ./node_modules/redux/lib/index.js from dll-reference react_7de69c5da675c4deed75","webpack:///./~/redux-persist/lib/index.js","webpack:///./~/redux-persist/lib/defaults/asyncLocalStorage.js","webpack:///./~/timers-browserify/main.js","webpack:///./~/setimmediate/setImmediate.js","webpack:///delegated ./node_modules/process/browser.js from dll-reference react_7de69c5da675c4deed75","webpack:///./~/redux-persist/lib/autoRehydrate.js","webpack:///./~/redux-persist/lib/constants.js","webpack:///./~/redux-persist/lib/utils/isStatePlainEnough.js","webpack:///delegated ./node_modules/lodash/isPlainObject.js from dll-reference react_7de69c5da675c4deed75","webpack:///./~/redux-persist/lib/createPersistor.js","webpack:///./~/redux-persist/lib/purgeStoredState.js","webpack:///./~/json-stringify-safe/stringify.js","webpack:///./~/redux-persist/lib/createTransform.js","webpack:///./~/redux-persist/lib/getStoredState.js","webpack:///./~/redux-persist/lib/persistStore.js","webpack:///./app/redux/reducers/course.js","webpack:///./app/redux/middlewares/socket_recorder.js","webpack:///./app/redux/middlewares/browser_hash.js","webpack:///delegated ./node_modules/redux-thunk/lib/index.js from dll-reference react_7de69c5da675c4deed75","webpack:///./app/stylus/main.styl?c489","webpack:///./app/stylus/main.styl","webpack:///./~/css-loader/lib/css-base.js","webpack:///./app/stylus/img/pen.png","webpack:///./~/style-loader/addStyles.js","webpack:///./app/paste_handler.js","webpack:///./~/md5/md5.js","webpack:///./~/crypt/crypt.js","webpack:///./~/charenc/charenc.js","webpack:///./~/is-buffer/index.js"],"names":["loading_content","name","loading","url","Promise","resolve","reject","$","get","data","format_menu","lines","split","map","l","trim","filter","length","x","f","others","join","k","n","title","type","match","replace","level","topic","Main","window","location","href","state","content","store","getState","course","id","promise","then","dispatch","menuItem","find","setState","Component","_App","item","props","widget","y","w","width","h","height","renderPanel","_add_code","bind","_add_md","_add_audio","App","render","document","getElementById","Menu","paddingLeft","fontSize","paddingTop","paddingBottom","cursor","_switch","itemStyle","styles","container","borderRight","ACTION_SET_COURSE","ACTION_SWITCH_TO","set_course","switch_to","_Blackboard","console","log","lastX","lastY","colors","color","penSize","_keydown","addEventListener","redraw_data","line","JSON","parse","_draw","ctx","refs","canvas","getContext","_clear","_redraw","event","paste_handler","_paste","I","setInterval","saveWidgets","_reloading","clearInterval","removeEventListener","idx","indexOf","ndx","key","_pick","widgets","nextProps","setTimeout","draw","_loaded","beginPath","strokeStyle","lineWidth","moveTo","lineTo","stroke","clientX","clientY","tell_back_end","clearRect","img","_mouseMove","_mouseUp","_mouseDown","_renderWidgets","backgroundColor","top","left","Blackboard","ACTION_DRAW","ACTION_DRAW_SEGMENT","ACTION_CLEAR","draw_segment","clear","getDimensions","innerWidth","documentElement","clientWidth","body","innerHeight","clientHeight","catch","loading_data","url1","all","e","HSIZE","Dropbox","max","maxObj","__refs","style","zIndex","ref","__lock","box_id","__id_counter","__add_ref","draging","mode","_drag","_dragend","active","__remove_ref","cond1","pageX","cond2","pageY","cond3","cond4","dropbox","_in_boundary","_request_release","_require_lock","dw","Math","abs","dn","de","ds","th","_in_drag_area","stopPropagation","preventDefault","X","Y","xDiff","startX","yDiff","startY","startState","_dispatch_change","__maxZIndexObj","startDrag","dragCount","dragI","confirm","incre","borderColor","nStyle","_dragstart","_go","_delete","cloneElement","children","Markdown","markdown","Editor","raw","toHTML","show_editor","save","textarea","value","html","target","display","_toggle","_input","__html","dataTransferItemToBase64","blob","getAsFile","reader","FileReader","rejecte","onload","result","source","readAsDataURL","Fiddle","show_code","show_html","socket","on","msg","error","_s","frame","reload","reloading","editor","saveCtx","_compile","_toggleCode","_toggleHtml","Frame","contentWindow","p","src","CodeEditor","doc","setValue","initialContent","CodeMirror","cursorHeight","getValue","ACTION_SAVE","ACTION_COMPILE","compile","AudioRecorder","soundValue","handleSuccess","audioContext","AudioContext","constraints","audio","video","navigator","mediaDevices","getUserMedia","handleError","stream","soundMeter","connectToSource","alert","instant","toFixed","start","SoundMeter","context","slow","clip","script","createScriptProcessor","that","onaudioprocess","input","inputBuffer","getChannelData","i","sum","clipcount","sqrt","callback","mic","createMediaStreamSource","connect","destination","disconnect","ColorPicker","pick","c","init","reducers","reducer","query","initial","set_widgets","newState","add_widget","push","change_widget","widget_id","delete_widget","action","init_socket","io","socket_recorder","emit","next","browser_hash","history","pushState","paste_handler_factory","blackboard","clipboardData","items","Image","imgHeight","imgWidth","r"],"mappings":"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ACA,6B;;;;;;ACpDA;;AAEA;AACA;AACA,EAAC;;AAED,qGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAAyB,oBAAoB;AAC7C;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,uDAAsD;AACtD;AACA;AACA,2DAA0D;AAC1D;AACA,E;;;;;;;ACtHA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACpDA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAU;AACV;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,EAAC;;;;;;;;ACzLD,8C;;;;;;ACAA;;AAEA;AACA;AACA,EAAC;;AAED,qGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q,oDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;;AAEA;;AAEA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yEAAwE;AACxE;AACA,QAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA4B;;AAE5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2IAA0I,iCAAiC;AAC3K,4CAA2C;;AAE3C;AACA,IAAG;AACH;AACA,E;;;;;;ACzFA;;AAEA;AACA;AACA,EAAC;AACD;AACA,yD;;;;;;ACNA;;AAEA;AACA;AACA,EAAC;;AAED,qGAAoG,mBAAmB,EAAE,mBAAmB,8HAA8H;;AAE1Q;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACvBA,gD;;;;;;ACAA;;AAEA;AACA;AACA,EAAC;AACD;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,+CAA8C,yCAAyC;AACvF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,E;;;;;;;AC/KA;;AAEA;AACA;AACA,EAAC;AACD;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,YAAW;AACX;AACA,YAAW;AACX;AACA,QAAO;AACP,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;AC/CA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AC1BA;;AAEA;AACA;AACA,EAAC;AACD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,mC;;;;;;AC3BA;;AAEA;AACA;AACA,EAAC;;AAED,oDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iEAAgE,YAAY,2BAA2B;;AAEvG;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,iJAAgJ;AAChJ;AACA;AACA,QAAO;AACP,MAAK;AACL,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA,E;;;;;;;AChGA;;AAEA;AACA;AACA,EAAC;;AAED,oDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B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;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA,kCAAiC,4+D;;;;;;ACAjC;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,EAAC;;;;;;;AC/JD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAqB,cAAc;AACnC;AACA;AACA,MAAK;;AAEL;AACA;AACA,2BAA0B,OAAO;AACjC;AACA;AACA,MAAK;;AAEL;AACA;AACA,yCAAwC,kBAAkB;AAC1D;AACA;AACA,MAAK;;AAEL;AACA;AACA,kCAAiC,uBAAuB;AACxD;AACA;AACA,MAAK;;AAEL;AACA;AACA,gCAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,kCAAiC,gBAAgB;AACjD;AACA;AACA,MAAK;;AAEL;AACA;AACA,mCAAkC,kBAAkB;AACpD;AACA,wBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA,6CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC;;;;;;;AC/FD;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,kCAAiC,gBAAgB;AACjD;AACA;AACA,MAAK;;AAEL;AACA;AACA,gCAA+B,kBAAkB;AACjD;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 57ce80946e3fd7169ba7","module.exports = (__webpack_require__(2))(226);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/babel-polyfill/lib/index.js from dll-reference react_7de69c5da675c4deed75\n// module id = 1\n// module chunks = 0","module.exports = react_7de69c5da675c4deed75;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react_7de69c5da675c4deed75\"\n// module id = 2\n// module chunks = 0","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nimport React, {Component} from 'react'\nimport ReactDOM from 'react-dom'\nimport {Provider} from 'react-redux'\n\nimport URL from 'url-parse'\nimport qs from 'qs'\nimport {Menu} from \"./menu\"\nimport {Blackboard} from \"./Blackboard\"\n\nimport {init} from \"redux/store/init\"\nimport {init_socket} from 'redux/middlewares/socket_recorder'\n\nimport \"./stylus/main.styl\"\n\nimport {set_course, switch_to} from \"./redux/actions/course\"\n\nimport {Fiddle} from \"./Fiddle\"\nimport {Markdown} from \"./Markdown\"\nimport {connect} from 'react-redux'\nimport {getDimensions} from \"util/dimensions\"\n\nfunction loading_content(name) {\n  function loading() {\n    const url = `/courses/${name}.content`\n\n    return new Promise((resolve, reject) => {\n      $.get(url, data => {\n        resolve(data)\n      })\n    })\n\n  }\n  return loading(name)\n\n}\n\n\nfunction format_menu(data){\n\n  let lines = data.split(\"\\n\").map(l => l.trim())\n  lines = lines.filter(l => l.length > 1)\n  lines = lines.map(l => l.split(/[\\t ]/).map(x=>x.trim()))\n    .map(([f, ...others]) => {\n      const join = others.filter(k => k.length > 0).join(\" \")\n      return [f, join]\n    })\n\n  lines = lines.map(([n, title]) => {\n    let type = \"blackboard\"\n    if(title.match(/\\[code\\]/)) {\n      title = title.replace(\"[code]\", \"\")\n      type = 'code'\n    }\n    else if(title.match(/\\[markdown\\]/)) {\n      title = title.replace(\"[markdown]\", \"\")\n      type = 'blackboard&markdown'\n    }\n    return {\n      level : n.replace(\".\", \"\").length,\n      topic : n,\n      title,\n      type\n    }\n  })\n\n\n  return lines\n\n}\n\n\n\n\nexport class Main extends React.Component{\n  constructor(){\n    super()\n    const url = new URL(window.location.href)\n    // this.query = qs.parse(url.query.replace(\"?\", \"\")) || {}\n    // if(!this.query.course){\n    //   this.query.course = 'demo'\n    // }\n    this.state = {\n      content : null,\n      store : init()\n    }\n    init_socket()\n\n  }\n  componentWillMount(){\n    const {course, topic, id} = store.getState().course\n    const promise = loading_content(course)\n    promise.then(data => {\n      store.dispatch(set_course(course))\n\n      const content = format_menu(data)\n\n      // find topic \n      \n      if(!(topic && id)){\n        store.dispatch(switch_to(content[0].topic, 1 , content[0].title))\n      } else {\n\n        const menuItem = content.find(x => x.topic == topic)\n        store.dispatch(switch_to(topic, id , menuItem.title))\n      }\n      \n      this.setState({content})\n    })\n  }\n\n\n\n  render(){\n    const {content, store} = this.state\n    if(!content) {\n      return null\n    }\n\n    const course = store.getState().course\n    return <Provider store={store}>\n        <div>\n          <Menu content={content} course={course.course} />\n\n          <App content={content}/>\n        </div>\n    </Provider>\n  }\n}\n\n\nclass _App extends Component{\n\n  renderPanel(course){\n    const item = this.props.content.find(x => x.topic === course.topic)\n    return <Blackboard />\n    /*\n    if(item.type === 'blackboard'){\n      return <Blackboard />\n    }\n    else if(item.type === \"code\") {\n      return <Fiddle />\n    }\n    else if(item.type === \"blackboard&markdown\") {\n\n      return [<Blackboard key=\"1\" />, <Markdown  key=\"2\" />]\n    }\n    */\n  }\n  \n  _add_code(){\n    \n    const {course, topic, id} = this.props.course\n\n    store.dispatch({\n      type : \"ADD_WIDGET\",\n      widget : {type : \"code\", x : 80, y : 80, w : getDimensions().width - 160, h : getDimensions().height - 160},\n      topic,\n      id,\n    })\n  }\n  \n  _add_md(){\n     \n    const {course, topic, id} = this.props.course\n\n    store.dispatch({\n      type : \"ADD_WIDGET\",\n      widget : {type : \"markdown\", x : 80, y : 80, w : (getDimensions().width - 160) * 0.6 , h : (getDimensions().height - 160) * 0.6},\n      topic,\n      id,\n    })\n  }\n  \n  _add_audio(){\n\n\n    const {course, topic, id} = this.props.course\n\n    store.dispatch({\n      type : \"ADD_WIDGET\",\n      widget : {type : \"audio\", x : 80, y : 80, w : 150 , h : 40},\n      topic,\n      id,\n    })\n  }\n  render(){\n    return <div>\n      {this.renderPanel(this.props.course)}\n      <div className=\"tools\">\n        \n        <div className=\"tools-btn\" onClick={this._add_code.bind(this)}>\n          <i className=\"material-icons\">code</i>\n        </div>\n        <div className=\"tools-btn\" onClick={this._add_md.bind(this)} >\n          <i className=\"material-icons\">subject</i>\n        </div>\n        <div className=\"tools-btn\" onClick={this._add_audio.bind(this)} >\n          <i className=\"material-icons\">mic</i>\n        </div>\n        \n      </div>\n    </div>\n  }\n}\n\nconst map = state => {\n  return {\n    course : state.course\n  }\n\n}\nlet App =  connect(map)(_App)\n\n\n\n\nReactDOM.render(\n\n  <Main />,\n  document.getElementById(\"app\")\n)\n\n\n\n// WEBPACK FOOTER //\n// ./app/main.js","module.exports = (__webpack_require__(2))(1);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/react/react.js from dll-reference react_7de69c5da675c4deed75\n// module id = 4\n// module chunks = 0","module.exports = (__webpack_require__(2))(32);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/react-dom/index.js from dll-reference react_7de69c5da675c4deed75\n// module id = 5\n// module chunks = 0","module.exports = (__webpack_require__(2))(208);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/react-redux/lib/index.js from dll-reference react_7de69c5da675c4deed75\n// module id = 6\n// module chunks = 0","module.exports = (__webpack_require__(2))(183);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/url-parse/index.js from dll-reference react_7de69c5da675c4deed75\n// module id = 7\n// module chunks = 0","module.exports = (__webpack_require__(2))(178);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/qs/lib/index.js from dll-reference react_7de69c5da675c4deed75\n// module id = 8\n// module chunks = 0","/***********************************************\n * \n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\n\nimport React,{Component} from 'react'\n\nimport {\n  switch_to\n} from \"./redux/actions/course\"\n\nexport class Menu extends Component {\n\n  itemStyle(level) {\n    return {\n      paddingLeft : (level - 1) * 10 + \"px\",\n      fontSize : (20 - (level)) + 'px',\n      paddingTop : 10,\n      paddingBottom : 10,\n      cursor : 'pointer'\n    }\n  }\n  \n  \n  _switch(topic, title) {\n    store.dispatch(switch_to(topic, 1, title))\n  }\n\n  render(){\n    const {content, course} = this.props\n\n    return (\n      <div className=\"menu\">\n        {content.map( ({topic, title, level}) => {\n          return <div \n            onClick={ () => this._switch(topic, title)}\n            className=\"menu-item\" key={topic} style={this.itemStyle(level)}>{title}</div>\n        })}\n      </div>\n    )\n\n  }\n}\n\nconst styles = {\n  container : {\n    borderRight : '1px solid #eee',\n    width : '200px' \n    \n  }  \n}\n\n\n// WEBPACK FOOTER //\n// ./app/menu.js","/***********************************************\n * \n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nexport const ACTION_SET_COURSE = \"set_course@Blackboard\"\nexport const ACTION_SWITCH_TO = \"switch_to@Blackboard\"\n\nexport const set_course = (course) => {\n  return {\n    type : ACTION_SET_COURSE,\n    course: course \n  }  \n}\n\nexport const switch_to = (topic, id, title ) => {\n  return {\n    type : ACTION_SWITCH_TO,\n    topic,\n    id,\n    title\n  }\n  \n} \n\n\n// WEBPACK FOOTER //\n// ./app/redux/actions/course.js","/***********************************************\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\n\nimport React, {Component} from 'react'\n\nimport {connect} from 'react-redux'\n\n\nimport {switch_to} from \"./redux/actions/course\"\nimport {draw, clear, draw_segment} from \"./redux/actions/draw\"\n\n\nimport {getDimensions} from 'util/dimensions'\n\nimport {loading_data} from 'data/apis'\n\n/** 一些自定义组件 **/\nimport {Dropbox} from \"Dropbox\"\nimport {Markdown} from \"Markdown\"\nimport {Fiddle} from \"Fiddle\"\nimport {AudioRecorder} from \"AudioRecorder\"\nimport {ColorPicker} from \"./ColorPicker\"\nimport {paste_handler_factory} from \"./paste_handler\"\n\nclass _Blackboard extends Component{\n\n  constructor(props){\n    super()\n\n    console.log(props)\n\n    this.lastX = null\n    this.lastY = null\n\n    this.state = {\n      colors : [\n        \"white\",\n        \"#333\",\n        \"red\",\n        \"yellow\",\n        \"green\",\n        \"blue\"\n      ],\n      color : \"#333\",\n      penSize : 5,\n      x : null,\n      y : null,\n      loading : true\n    }\n\n    this._keydown = this._keydown.bind(this)\n    document.addEventListener(\"keydown\",this._keydown)\n  }\n  \n  \n  \n\n\n  _redraw(){\n    let lines = this.redraw_data\n    if(lines) {\n      lines = lines.split(\"\\n\").filter(line => line.length > 1).map(JSON.parse)\n      lines.map(({x, y, color, penSize}) => {\n        if(!x) {\n          this.lastX = null\n          this.lastY =  null\n        }else {\n          this._draw(this.ctx, color, x * 2, y * 2, penSize)\n        }\n      })\n\n    }\n    this.lastX = null\n    this.lastY =  null\n\n  }\n  _loaded(){\n\n    this.lastX = null\n    this.lastY = null\n    this.refs.canvas.width = getDimensions().width * 2\n    this.refs.canvas.height = getDimensions().height * 2\n    this.ctx = this.refs.canvas.getContext(\"2d\")\n    this._clear(false)\n    this._redraw()\n\n  }\n  \n  _paste(event){\n    const paste_handler = paste_handler_factory(this)\n    paste_handler(event)\n  }\n  componentDidMount(){\n\n    this._paste = this._paste.bind(this)\n    \n    document.addEventListener(\"paste\", this._paste)\n    this.I = setInterval(this.saveWidgets.bind(this), 1000)\n\n    \n    this._reloading()\n  }\n  componentWillUnmount(){\n    clearInterval(this.I)\n\n    document.removeEventListener(\"paste\", this._paste)\n    document.removeEventListener(\"keydown\",this._keydown)\n  }\n\n  _keydown() {\n    if(this.state.loading) {return}\n    const idx = this.state.colors.indexOf(this.state.color)\n\n    let ndx = null\n    if(event.key === 'ArrowLeft') {\n      ndx = idx - 1\n      if(ndx < 0 ) {\n        ndx = this.state.colors.length - 1\n      }\n\n\n      this._pick(this.state.colors[ndx])\n    } else if (event.key === \"ArrowRight\") {\n      ndx = idx + 1\n      if(ndx > this.state.colors.length - 1 ) {\n        ndx = 0\n      }\n\n      this._pick(this.state.colors[ndx])\n      // this.setState({color : this.state.colors[ndx]})\n    } else {\n\n      this._pick(this.state.colors[idx])\n    }\n  }\n\n\n\n  \n\n  saveWidgets(){\n    const topic = this.props.course.topic\n    const id = this.props.course.id\n    if(this.state.loading) {\n      return\n    }\n    if(this.props.course.widgets[topic]) {\n\n      store.dispatch({\n        type: \"SAVE_WIDGET\",\n        course: this.props.course.course,\n        topic: this.props.course.topic,\n        id: this.props.course.id\n        // widgets: this.props.course.widgets[topic][id]\n      })\n    }\n    \n  }\n\n  componentWillReceiveProps(nextProps){\n\n\n    if(nextProps.course.course !== this.props.course.course\n      ||\n      nextProps.course.topic !== this.props.course.topic\n      ||\n\n      nextProps.course.id !== this.props.course.id\n    )\n    {\n      setTimeout( (() => {\n        this._reloading()\n      }).bind(this), 20)\n    }\n  }\n\n\n\n  _reloading() {\n    loading_data (this.props.course)\n      .then( (({draw, widgets}) => {\n          setTimeout( () => {\n\n            store.dispatch({\n              type : \"SET_WIDGETS\",\n              widgets : widgets,\n              topic : this.props.course.topic,\n              id : this.props.course.id\n            })\n            \n            /*\n            widgets.map(widget => {\n              store.dispatch({\n                type : \"ADD_WIDGET\",\n                widget,\n                topic : this.props.course.topic,\n                id : this.props.course.id\n              })\n            })\n            */\n          }, 0)\n\n\n\n          this.redraw_data = draw\n          this.setState({\n            loading : false,\n          }, this._loaded.bind(this))\n\n\n        }).bind(this)\n      )\n  }\n  _mouseDown(){\n\n    this.draw = true\n  }\n\n  _draw(ctx,color, x, y, penSize) {\n\n    if(this.lastX && this.lastY) {\n\n      ctx.beginPath()\n      ctx.strokeStyle=color\n      ctx.lineWidth = penSize\n      ctx.moveTo(this.lastX, this.lastY)\n      ctx.lineTo(x, y)\n      ctx.stroke()\n    }\n\n    this.lastX = x\n    this.lastY = y\n\n\n  }\n\n  _mouseMove(event){\n\n    const x = event.clientX\n    const y = event.clientY\n\n\n    if(this.draw) {\n      const course = this.props.course\n      store.dispatch(draw(course.course, course.topic, course.id, x, y, this.state.color, this.state.penSize))\n      this._draw(this.ctx, this.state.color, x * 2, y * 2, this.state.penSize)\n    }\n    this.setState({\n      x,\n      y\n    })\n\n\n  }\n\n  _mouseUp(){\n    this.draw = false\n    this.lastX = null\n    this.lastY =  null\n    store.dispatch(draw_segment(\n      this.props.course.course,\n      this.props.course.topic,\n      this.props.course.id\n    ))\n\n  }\n\n  _pick(color){\n    if(color === 'white') {\n\n      this.setState({\n        color,\n        penSize : 100\n      })\n\n    }\n    else {\n      this.setState({\n        color,\n        penSize : 5\n      })\n    }\n\n  }\n\n  _clear(tell_back_end = true){\n    if(tell_back_end) {\n\n      store.dispatch(clear(this.props.course.course, this.props.course.topic, this.props.course.id))\n    }\n    this.ctx.clearRect(0, 0, getDimensions().width * 2, getDimensions().height * 2)\n  }\n  \n  \n\n  _switch(id) {\n    this._clear(false)\n    store.dispatch(switch_to(this.props.course.topic, id))\n\n  }\n\n  _renderWidgets(){\n\n\n    const topic = this.props.course.topic\n    const id = this.props.course.id\n    if(!this.props.course.widgets[topic]){\n      return null\n    }\n    \n    const widgets = this.props.course.widgets[topic][id]\n    if(!widgets){\n      return null\n      \n    }\n    \n    return widgets.map(widget => {\n      \n      const key = topic + \"_\" + id +  \"_\" + widget.id\n      switch(widget.type) {\n        \n        case \"markdown\":\n          return <Dropbox key={key} course={this.props.course} widget={widget}>\n            <Markdown course={this.props.course} widget={widget} />\n          </Dropbox>\n        case \"code\":\n          return <Dropbox key={key} course={this.props.course} widget={widget}>\n            <Fiddle course={this.props.course} widget={widget} />\n          </Dropbox>\n        case \"audio\" :\n          return  <Dropbox key={key} course={this.props.course} widget={widget}>\n            <AudioRecorder course={this.props.course} widget={widget} />\n          </Dropbox>\n        \n        case \"image\" :\n          return  <Dropbox key={key} course={this.props.course} widget={widget}>\n            <div>\n              <img style={{width : '100%', height : '100%'}} src={widget.img} />\n            </div>\n          </Dropbox>\n\n        \n      }  \n    })\n    console.log(\"@Blckboard _renderWidgets()\")\n    console.log(widgets)\n\n  }\n\n\n  render(){\n    const { colors, color, x, y, loading } = this.state\n    // console.log(\"@Blackboard render\")\n\n    if(loading) { return null}\n    const {course} = this.props\n\n    return <div\n      onMouseMove={this._mouseMove.bind(this)}\n      onMouseUp={this._mouseUp.bind(this)}\n      onMouseDown={this._mouseDown.bind(this)}\n    >\n\n      {this._renderWidgets()}\n\n      <div className=\"title\">{course.title}</div>\n      <div id=\"pages\" className=\"pages\">\n        {\n          [1, 2, 3, 4, 5, 6, 7, 8, 9].map(x => {\n            return <div key={x} onClick={() => this._switch(x)} style={{backgroundColor : x ==course.id ? \"#31d22e\" : \"#f2f3f4\"}} className=\"page\">{x}</div>\n          })\n        }\n\n      </div>\n      <div className=\"cleaner\" onClick={this._clear.bind(this)}>清空</div>\n\n      {color === 'white' &&\n      <div className=\"eraser\" style={{top : (y - 25) + \"px\", left : (x - 25) + \"px\"}}></div>\n      }\n\n      <ColorPicker pick={this._pick.bind(this)} colors={colors} color={color} />\n\n      <canvas className='canvas'\n              ref=\"canvas\"\n\n      />\n\n    </div>\n  }\n}\n\n\n\n\nconst map = (state) => {\n  return {\n    course : state.course\n  }\n}\nexport let Blackboard = connect(map)(_Blackboard)\n\n\n// WEBPACK FOOTER //\n// ./app/Blackboard.js","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nexport const ACTION_DRAW = \"draw@Blackboard\"\nexport const ACTION_DRAW_SEGMENT = \"draw_seg@Blackboard\"\nexport const ACTION_CLEAR = \"clear@Blackboard\"\n\n\nexport const draw = (course, topic, id, x, y, color, penSize) => {\n  return {\n    type : ACTION_DRAW,\n    course,\n    topic,\n    id,\n    x, \n    y,\n    color,\n    penSize\n  }\n}\n\n\nexport const draw_segment = (course, topic, id) => {\n  return {\n    type : ACTION_DRAW_SEGMENT,\n    course,\n    topic,\n    id,\n  }\n}\n\n\n// export const set_color = (course, topic, id, color) => {\n//   return {\n//     type : ACTION_SET_COLOR,\n//     course,\n//     topic,\n//     id,\n//     color : color\n//   }\n// }\n\nexport const clear = (course, topic, id) => {\n  return {\n    course,\n    topic,\n    id,\n    type : ACTION_CLEAR \n  }  \n}\n\n\n// WEBPACK FOOTER //\n// ./app/redux/actions/draw.js","/***********************************************\n * \n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\n\nexport const getDimensions = () => {\n\n  const width = window.innerWidth\n    || document.documentElement.clientWidth\n    || document.body.clientWidth\n\n  const height = window.innerHeight\n    || document.documentElement.clientHeight\n    || document.body.clientHeight\n  return {\n    width,\n    height\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/util/dimensions.js","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\n\n\nconst get = (url) => {\n  return new Promise((resolve, reject) => {\n    $.get(url, data => {\n        resolve(data)\n      })\n      .catch(err => {\n        resolve(null)\n      })\n  })\n}\n\nexport const loading_data = async ({course, topic, id}) => {\n\n  const url = `/courses/${course}/${topic}/${id}.log`\n  const url1 = `/courses/${course}/${topic}/${id}.widget`\n\n  const data = await Promise.all([\n    get(url),\n    get(url1)\n  ])\n  \n  \n  /// TODO 调试返回数据\n  \n  let widgets = [] \n  if(!data[1]) {\n    widgets = [\n      // {type : \"code\", x : 100, y : 100, w : 300, h : 300},\n      // {type : \"markdown\", x : 300, y : 100, w : 300, h : 300}\n    ] \n  } else {\n    try{\n      widgets = JSON.parse(data[1])\n    }\n    catch(e) {\n     /// TODO \n    }\n  }\n  return {\n    draw : data[0],\n    widgets\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/data/apis.js","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nimport React, {Component} from 'react'\n\nconst HSIZE = 20 \n\nexport class Dropbox extends Component{\n\n  static __lock = {}\n  static __id_counter = 0 \n  static __refs = {}\n\n  static __maxZIndexObj(topic, id){\n    let max = -1\n    let maxObj = null\n    if(!Dropbox.__refs[topic] || !Dropbox.__refs[topic][id]){\n      return maxObj\n    }\n    for(let key in Dropbox.__refs[topic][id]) {\n      if(max < Dropbox.__refs[topic][id][key].state.style.zIndex) {\n        max =  Dropbox.__refs[topic][id][key].state.style.zIndex\n        maxObj = Dropbox.__refs[topic][id][key]\n      }\n    }\n    return maxObj\n  }\n\n  static __add_ref(topic, id, ref){\n    if(!Dropbox.__refs[topic]) {\n      // Dropbox.__id_counter[topic] = {}\n      Dropbox.__refs[topic] = {}\n      Dropbox.__lock[topic] = {}\n    }\n    if(!Dropbox.__refs[topic][id]) {\n      // Dropbox.__id_counter[topic][id] = 0\n      Dropbox.__refs[topic][id] = {}\n      Dropbox.__lock[topic][id] = null\n    }\n    const box_id = ++Dropbox.__id_counter\n    Dropbox.__refs[topic][id][box_id] =  ref\n    return box_id\n  }\n\n\n  static __remove_ref(topic, id, box_id) {\n\n    delete Dropbox.__refs[topic][id][box_id]\n  }\n\n\n\n  constructor({widget : {x, y, w, h}, course : {topic, id}}){\n    super()\n\n\n    \n    this.id = Dropbox.__add_ref(topic, id, this)\n\n    this.state = {\n      style : {\n        x,\n        y,\n        w,\n        h,\n        zIndex : 10,\n        cursor : null\n      },\n      draging : false\n    }\n\n    this.mode = null\n    this._drag = this._drag.bind(this)\n    this._dragend = this._dragend.bind(this)\n  }\n\n  componentDidMount(){\n    this.active = true\n    document.body.addEventListener(\"mousemove\", this._drag)\n    document.body.addEventListener(\"mouseup\", this._dragend)\n  }\n\n  componentWillUnmount(){\n    this.active = false\n\n    Dropbox.__remove_ref(this.props.course.topic, this.props.course.id, this.id)\n    document.body.removeEventListener(\"mouseup\", this._dragend)\n    document.body.removeEventListener(\"mousemove\", this._drag)\n  }\n\n\n  _dispatch_change(){\n    store.dispatch({\n      type: \"CHANGE_WIDGET\",\n      topic: this.props.course.topic,\n      id: this.props.course.id,\n      widget: this.props.widget,\n      x: this.state.style.x,\n      y: this.state.style.y,\n      w: this.state.style.w,\n      h: this.state.style.h,\n      zIndex : this.state.style.zIndex\n    })\n  }\n\n\n  _in_boundary(){\n    const cond1 = event.pageX - this.state.style.x > 0\n    const cond2 = event.pageY - this.state.style.y > 0\n    const cond3 = event.pageX - (this.state.style.x + this.state.style.w) < 0\n    const cond4 = event.pageY - (this.state.style.y + this.state.style.h) < 0\n    return cond1 && cond2 && cond3 && cond4\n  }\n\n  _in_drag_area() {\n    const cond1 = event.pageX - this.state.style.x > 0\n    const cond2 = event.pageY - this.state.style.y > 0\n    const cond3 = event.pageX - (this.state.style.x + this.state.style.w) < 0\n    const cond4 = event.pageY - (this.state.style.y + HSIZE) < 0\n    return cond1 && cond2 && cond3 && cond4\n  }\n\n  /**\n   * 请求释放lock\n   * 比较\n   * @param dropbox\n   * @private\n   */\n  _request_release(dropbox, event){\n\n    if(this.state.draging) {\n      return false\n    }\n    //console.log(\"request \" + this.id + \" to release lock\")\n    if(!this._in_boundary(event)) {\n      //console.log(this.id + \" agree release lock\")\n      return true\n    }\n    else {\n      //console.log(\"compare zIndex\")\n      //console.log(this.id + \" zIndex:\" + this.state.style.zIndex )\n      //console.log(dropbox.id + \" zIndex:\" + dropbox.state.style.zIndex )\n      if( (this.state.style.zIndex == dropbox.state.style.zIndex) && this.id < dropbox.id) {\n\n        //console.log(\"brc 1\")\n        return true\n      }\n      else if(this.state.style.zIndex < dropbox.state.style.zIndex) {\n\n        //console.log(\"brc 2\")\n        return true\n      }else {\n\n        //console.log(\"brc 3\")\n        return false\n      }\n\n    }\n\n    return true\n  }\n  _require_lock(event){\n    \n    const {topic, id} = this.props.course\n\n    // console.log(id + \":require lock\")\n    \n    if(this._in_boundary(event)) {\n\n      //console.log(\"in boundary\")\n      if(!Dropbox.__lock[topic][id]) {\n        // console.log(\"no lock\")\n        Dropbox.__lock[topic][id] = this.id\n        // console.log(\"require lock success\")\n      }\n      else if(Dropbox.__lock[topic][id] !=  this.id) {\n\n        //console.log(\"lock : \" + Dropbox.__lock)\n        if(Dropbox.__refs[topic][id][Dropbox.__lock[topic][id]]){\n          if(Dropbox.__refs[topic][id][Dropbox.__lock[topic][id]]._request_release(this, event)) {\n            Dropbox.__lock[topic][id] = this.id\n            //console.log(\"require lock success\")\n          }else{\n\n            // console.log(\"require lock fail\")\n          }\n\n        }else {\n          Dropbox.__lock[topic][id] = this.id\n          // console.log(\"require lock success\")\n        }\n      }else {\n\n        // console.log(\"already have lock\")\n      }\n    }\n    else {\n      // console.log(\"require lock fail\")\n    }\n  }\n\n  _drag(event){\n\n    if(!this.active) {return} \n    \n\n    const {topic, id} = this.props.course\n    this._require_lock(event)\n\n    if(Dropbox.__lock[topic][id] != this.id) {\n      return\n    }\n\n    //// 判断是否算作调整大小\n    // //console.log(event.pageY, event.pageY, event.pageY)\n\n\n    if(!this.state.draging) {\n\n      const dw = Math.abs(event.pageX - this.state.style.x)\n      const dn = Math.abs(event.pageY - this.state.style.y)\n      const de = Math.abs(event.pageX - (this.state.style.x + this.state.style.w))\n      const ds = Math.abs(event.pageY - (this.state.style.y + this.state.style.h))\n      const th = 10\n\n\n      if(dw < th && dn < th) {\n        this.mode = 'nw-resize'\n      }\n      else if (dn < th && de < th) {\n        this.mode = \"ne-resize\"\n      } else if(de < th && ds < th) {\n        this.mode = 'se-resize'\n      } else if(ds < th && dw < th) {\n        this.mode = \"sw-resize\"\n      }\n      else if (dw < th) {\n        this.mode = 'w-resize'\n      }\n      else if (dn < th) {\n        this.mode = 'n-resize'\n      }\n      else if (de < th) {\n        this.mode = 'e-resize'\n      }\n      else if (ds < th) {\n        this.mode = 's-resize'\n      }\n      else {\n\n        if(this._in_drag_area(event)) {\n          this.mode = 'move'\n        } else {\n          this.mode = ''\n        }\n      }\n\n      // console.log('set mode:' + this.mode + \" | \" + this.id)\n      //console.log('change cursor to:' + this.mode)\n      document.getElementById(\"app\").style.cursor = this.mode\n\n      return\n    }\n\n    if(this.mode) {\n      event.stopPropagation()\n      event.preventDefault()  \n    }\n    \n    //console.log(this.mode)\n\n    if (this.X && this.Y) {\n\n      const xDiff = this.X - this.startX\n      const yDiff = this.Y - this.startY\n      //console.log(xDiff, yDiff)\n\n      if(this.mode === 'nw-resize') {\n\n        this.setState({\n          style : {\n            ...this.state.style,\n            x : this.startState.x + xDiff,\n            y : this.startState.y + yDiff,\n            w : this.startState.w - xDiff,\n            h : this.startState.y - yDiff\n          }\n        }, (() => {\n\n          this._dispatch_change()\n        }).bind(this))\n\n      } else if(this.mode == \"ne-resize\") {\n        this.setState({\n          style : {\n            ...this.state.style,\n            y : this.startState.y + yDiff,\n            w : this.startState.w + xDiff,\n            h : this.startState.h - yDiff\n          }\n        }, (() => {\n\n          this._dispatch_change()\n        }).bind(this))\n\n\n      } else if (this.mode == \"se-resize\") {\n        this.setState({\n          style : {\n            ...this.state.style,\n            w : this.startState.w + xDiff,\n            h : this.startState.y + yDiff\n          }\n        }, (() => {\n\n          this._dispatch_change()\n        }).bind(this))\n\n      } else if (this.mode == 'sw-resize') {\n\n        this.setState({\n          style : {\n            ...this.state.style,\n            x : this.startState.x + xDiff,\n            w : this.startState.w - xDiff,\n            h : this.startState.y + yDiff\n          }\n        }, (() => {\n\n          this._dispatch_change()\n        }).bind(this))\n      }\n\n      else if(this.mode === 'w-resize') {\n        this.setState({\n          style : {\n            ...this.state.style,\n            x : this.startState.x + xDiff,\n            w : this.startState.w - xDiff\n          }\n\n        }, (() => {\n\n          this._dispatch_change()\n        }).bind(this))\n      }\n      else if(this.mode === 'n-resize') {\n        this.setState({\n          style : {\n            ...this.state.style,\n            y : this.startState.y + yDiff,\n            h : this.startState.h - yDiff\n          }\n\n        }, (() => {\n          this._dispatch_change()\n        }).bind(this))\n      }\n      else if(this.mode === 'e-resize') {\n        this.setState({\n          style : {\n            ...this.state.style,\n            w : this.startState.w + xDiff\n          }\n\n        }, (() => {\n          this._dispatch_change()\n        }).bind(this))\n      }\n      else if(this.mode === 's-resize') {\n        this.setState({\n          style : {\n            ...this.state.style,\n            h : this.startState.h + yDiff\n          }\n\n        }, (() => {\n          this._dispatch_change()\n        }).bind(this))\n      }\n\n\n\n      else if(this.mode === 'move') {\n\n\n        this.setState({\n          style: {\n            ...this.state.style,\n            x: this.startState.x + xDiff,\n            y: this.startState.y + yDiff\n          }\n        }, (() => {\n          this._dispatch_change()\n\n        }).bind(this))\n      }\n\n    }\n    this.X = event.pageX\n    this.Y = event.pageY\n\n  }\n  _dragstart(event){\n\n    if(!this.active) {return} \n    const {topic, id} = this.props.course\n    this._require_lock(event)\n    if(Dropbox.__lock[topic][id] !== this.id) {\n      return\n    }\n\n    const maxObj = Dropbox.__maxZIndexObj(topic, id)\n    \n    this.startX = event.pageX\n    this.startY = event.pageY\n    const startDrag = (() => {\n      \n      \n      this.startState = {...this.state.style}\n      this.dragCount = 0\n      this.dragI = setInterval( (() => {\n        this.dragCount ++\n        if(this.dragCount > 20) {\n          clearInterval(this.dragI)\n          this.setState({\n            draging : true\n          })\n        }\n      }).bind(this), 10)\n    }).bind(this)\n\n    // console.log(\"max obj id:\"  + maxObj.id)\n    \n    // if(maxObj.id !== this.id) {\n      this.setState({\n        style : {...this.state.style, zIndex : maxObj.state.style.zIndex + 1}\n      }, () => {\n        startDrag()\n      })\n    // } else {\n    //   startDrag()\n    // }\n\n\n  }\n  _dragend() {\n    if(!this.active) {return}\n    const {topic, id} = this.props.course\n    if(Dropbox.__lock[topic][id] === this.id) {\n      Dropbox.__lock[topic][id] = null\n    }\n    this.mode = null\n    clearInterval(this.dragI)\n    this.setState({\n      draging : false\n    })\n  }\n  _delete(){\n    if(confirm(\"您确定要删除吗?\")){\n      store.dispatch({\n        type : \"DELETE_WIDGET\",\n        course : this.props.course.course,\n        topic : this.props.course.topic,\n        id : this.props.course.id,\n        widget : this.props.widget\n\n      })\n    }\n\n\n  }\n\n  _go(n, incre = true) {\n\n    return (() => {\n\n      if(incre) {\n        let zIndex = this.state.style.zIndex + n\n        if (zIndex < 10) {\n          zIndex = 10\n        }\n        this.setState({style: {...this.state.style, zIndex}}, (() => {\n          this._dispatch_change()\n        }).bind(this))\n      } else {\n         this.setState({style: {...this.state.style, zIndex : 8}}, (() => {\n          this._dispatch_change()\n        }).bind(this))\n      }\n\n    }).bind(this)\n\n  }\n\n\n  _cursor(){\n\n  }\n  render(){\n    const {style,cursor, zIndex} = this.state\n\n    const borderColor = this.state.draging ? \"black\" : \"#eee\"\n\n    const nStyle = {\n      top : style.y + \"px\",\n      width : style.w + \"px\",\n      height : style.h + \"px\",\n      left : style.x+'px', borderColor : borderColor, zIndex : style.zIndex}\n\n\n    return <div\n      ref=\"dropbox\"\n      className=\"dropbox\" style={nStyle}\n      onMouseDown={this._dragstart.bind(this)}\n    >\n      <div className=\"delete\" >\n        <i className=\"material-icons\" onClick={this._go(8, false)}>vertical_align_bottom</i>\n        <i className=\"material-icons\" onClick={this._go(1)}>arrow_upward</i>\n        <i className=\"material-icons\" onClick={this._go(-1)}>arrow_downward</i>\n        <i className=\"material-icons\" onClick={this._delete.bind(this)}>delete</i>\n      </div>\n      <div>\n        <div className=\"drag-area\">\n        </div>\n        {React.cloneElement(this.props.children, {style})}\n      </div>\n    </div>\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Dropbox.js","/***********************************************\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\n\nimport React, {Component} from 'react'\n\nimport {connect} from 'react-redux'\n\n\n\n\n\nimport {switch_to} from \"./redux/actions/course\"\nimport {draw, clear, draw_segment} from \"./redux/actions/draw\"\nimport {getDimensions} from \"util/dimensions\"\n\nimport {dataTransferItemToBase64} from \"util/data_helper\"\n\nfunction loading_data({course, topic, id}, widget) {\n  function loading() {\n    const url = `/courses/${course}/${topic}/${id}_${widget.id}.md`\n\n    return new Promise((resolve, reject) => {\n      $.get(url, data => {\n          resolve(data)\n        })\n        .catch(err => {\n          resolve(null)\n        })\n    })\n\n  }\n  return loading()\n}\n\n\n\nexport class Markdown extends Component{\n\n  constructor(props){\n    super()\n    this.state = {\n      markdown : null,\n      loading : true\n    }\n  }\n\n  componentDidMount(){\n\n    loading_data(this.props.course, this.props.widget)\n      .then(data => {\n\n        this.setState({\n          markdown : data,\n          loading : false\n        })\n      })\n  }\n\n\n\n  componentWillReceiveProps(nextProps){\n\n\n    if(nextProps.course.course !== this.props.course.course\n      ||\n      nextProps.course.topic !== this.props.course.topic\n      ||\n\n      nextProps.course.id !== this.props.course.id\n    )\n    {\n      setTimeout( (() => {\n        this._reloading()\n      }).bind(this), 20)\n    }\n  }\n\n\n\n\n  _reloading() {\n    loading_data (this.props.course)\n      .then( (data => {\n        this.setState({\n          loading : false,\n          markdown : data\n        })\n\n      }).bind(this))\n\n  }\n\n  render(){\n    if(this.state.loading){\n      return null\n    }\n    return <Editor key=\"1\" {...this.props} raw={this.state.markdown} />\n  }\n}\n\nclass Editor extends Component{\n  constructor(props){\n    super()\n    this.state = {\n      raw : props.raw || \"\",\n      content : markdown.toHTML(props.raw || \"\"),\n      show_editor : false \n    }\n\n  }\n\n  save(){\n\n    const {course, topic, id} = this.props.course\n    const {widget} = this.props\n    store.dispatch({\n      type : \"SAVE_MARKDOWN\",\n      course,\n      topic,\n      id,\n      widget,\n      markdown : this.state.raw\n\n    })\n\n  }\n  componentDidMount(){\n\n    this.I = setInterval(this.save.bind(this), 1000)\n    this.refs.textarea.value = this.state.raw\n  }\n  componentWillUnmount(){\n    clearInterval(this.I)\n  }\n\n  _input(event){\n\n    const html = markdown.toHTML(event.target.value)\n    this.setState({\n      raw : event.target.value,\n      content : html\n    })\n\n  }\n  \n  \n\n  _toggle(){\n    this.setState({show_editor : !this.state.show_editor}, (() => {\n\n      this.refs.textarea.value = this.state.raw\n    }).bind(this))\n  }\n  render () {\n\n    const display =this.state.show_editor ? \"block\" : \"none\"\n    const {style} = this.props\n    \n    return (\n      <div className=\"markdown clearfix\" ref=\"markdown\">\n\n        <div\n          onClick={this._toggle.bind(this)}\n          className=\"btn\" style={{color : this.state.show_editor ? \"#49fff6\" : \"#ddd\"}}><i className=\"material-icons\">mode_edit</i></div>\n        <div className=\"markdown-editor\" style={{display, height : style.h + \"px\" }}>\n          <textarea ref=\"textarea\" onInput={this._input.bind(this)} ></textarea>\n        </div>\n        <div className=\"preview\" style={{width : this.state.show_editor ? \"50%\" : \"100%\", height : style.h + \"px\"}} dangerouslySetInnerHTML={{__html : this.state.content}}/>\n        <div style={{clear : 'both'}}></div>\n      </div>\n    )\n  }\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Markdown.js","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\n\n/**\n * 将DataTransferItem 转换为Base64的字符串\n */\nexport const dataTransferItemToBase64 = ( item ) => {\n\n  const blob = item.getAsFile()\n  const reader = new FileReader()\n  \n  const promise = new Promise( (resolve, rejecte) => {\n    reader.onload = function(event) {\n      resolve(event.target.result)\n    }\n    const source = reader.readAsDataURL(blob);\n  })\n  return promise\n  \n}\n\n\n// WEBPACK FOOTER //\n// ./app/util/data_helper.js","/***********************************************\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\n\nimport React, {Component} from 'react'\n\n\nimport {connect} from 'react-redux'\n\n\nimport {switch_to} from \"./redux/actions/course\"\nimport {save, compile} from \"./redux/actions/code\"\n\nimport {getDimensions} from \"util/dimensions\"\n\nfunction loading_data({course, topic, id}, widget) {\n  function loading() {\n    const url = `/courses/${course}/${topic}/${id}_${widget.id}.js`\n\n    return new Promise((resolve, reject) => {\n      $.get(url, data => {\n          resolve(data)\n        }, \"text\")\n        .catch(err => {\n          resolve(null)\n        })\n    })\n\n  }\n  return loading()\n\n}\nexport class Fiddle extends Component{\n\n  constructor(){\n    super()\n    this.state = {\n      content : null,\n      loading : true,\n      show_code : true,\n      show_html : true\n    }\n  }\n  \n  componentDidMount(){\n    socket.on(\"compile-error\", function(msg){\n      console.error(msg)\n    }) \n    const _s = this\n    socket.on(\"compile-succ\", function(msg){\n      \n      if(_s.refs.frame)\n        _s.refs.frame.reload()\n\n    })\n  }\n  \n  componentWillMount(){\n    \n    this.reloading(this.props.course)\n  }\n  \n  reloading(course){\n    const _s = this\n    loading_data(course, this.props.widget)\n      .then(data => {\n        _s.setState({\n          content : data || \"\",\n          loading : false\n        }, () => {\n          _s.refs.editor.reload()\n        })  \n      })\n  }\n  \n  \n\n  componentWillReceiveProps(nextProps){\n\n    if(nextProps.course.course !== this.props.course.course\n      ||\n      nextProps.course.topic !== this.props.course.topic\n      ||\n\n      nextProps.course.id !== this.props.course.id\n    )\n    {\n      setTimeout( (() => {\n        this.reloading(nextProps.course)\n      }).bind(this), 20)\n    }\n  }\n  \n  _compile(){\n    const course = this.props.course\n    store.dispatch(compile(course.course, course.topic, course.id, this.props.widget)) \n  }\n  \n  _save(){\n    if(!this.state.loading)\n      this.refs.editor.saveCtx()\n  }\n\n  _toggleCode(){\n    this.setState({\n      show_code : !this.state.show_code\n    })\n    \n  }\n\n  _toggleHtml(){\n    this.setState({\n      show_html: !this.state.show_html\n    })\n  }\n  \n\n  render(){\n    if(this.state.content === null || this.state.loading) {\n      return null\n    }\n    \n    return <div className=\"fiddle\">\n\n      <div className=\"options\">\n        <div className=\"option\" onClick={this._compile.bind(this)} ><i className=\"material-icons\">play_arrow</i></div>\n        <div className=\"option\" onClick={this._toggleCode.bind(this)} >code</div>\n        <div className=\"option\" onClick={this._toggleHtml.bind(this)} >html</div>\n        <div style={{clear : \"both\"}}></div>\n      </div>\n\n      <div>\n        <CodeEditor\n          show_html={this.state.show_html} show_code={this.state.show_code}\n          style={this.props.style}\n          widget={this.props.widget} course={this.props.course}\n          initialContent={this.state.content} ref=\"editor\"/>\n\n        <Frame show_html={this.state.show_html} show_code={this.state.show_code} widget={this.props.widget} course={this.props.course} ref=\"frame\"/>\n        <div style={{clear : \"both\"}}/>\n      </div>\n    </div>\n    \n  }\n}\n\n\nclass Frame extends Component{\n\n  reload(){\n    this.refs.frame.contentWindow.location.reload()\n  }\n\n  render() {\n    \n    \n    const p = (show_code, show_html) => {\n      if(show_code && show_html) {\n        return \"30%\"\n      } else if(show_html) {\n        return  \"100%\"\n      }\n      \n    } \n    const course = this.props.course\n    const src = \"/app?file=\" + course.course + \"_\" + course.topic + \"_\" + course.id + \"_\" + this.props.widget.id\n    return <div className=\"frame\" style={{display : this.props.show_html ? \"block\" : \"none\", width : p(this.props.show_code, this.props.show_html)}}>\n      <iframe frameBorder=\"0\" src={src} ref=\"frame\"/>\n\n    </div>\n  }\n}\n\n\nclass CodeEditor extends Component {\n\n\n  reload(){\n    this.doc.setValue(this.props.initialContent)   \n  }\n\n  componentDidMount(){\n    this.doc = CodeMirror(this.refs.editor, {\n      value: this.props.initialContent,\n      mode:  \"jsx\",\n      cursorHeight : 1 \n    });\n\n    \n    this.I = setInterval( this.saveCtx.bind(this), 1000)\n  }\n\n  compomentWillUnmount(){\n    clearInterval(this.I)\n  }\n  \n  saveCtx(){\n\n    const value = this.doc.getValue()\n    const course = this.props.course\n    store.dispatch(save(course.course, course.topic, course.id, value, this.props.widget))\n    \n  }\n  render(){\n     \n    const p = (show_code, show_html) => {\n      if(show_code && show_html) {\n        return \"70%\"\n      } else if(show_code) {\n        return  \"100%\"\n      }\n      \n    } \n    return <div ref=\"editor\" style={{height : this.props.style.h + \"px\", display : this.props.show_code ? \"block\" : \"none\", width : p(this.props.show_code, this.props.show_html)}} className=\"editor\"></div>\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Fiddle.js","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nexport const ACTION_SAVE = \"save@Fiddle\"\nexport const ACTION_COMPILE = \"compile@Fiddle\"\n\n\nexport const save = (course, topic, id, content, widget) => {\n  return {\n    type : ACTION_SAVE,\n    course,\n    topic,\n    id,\n    content ,\n    widget\n  }\n}\n\n\nexport const compile = (course, topic, id, widget) => {\n  return {\n    type : ACTION_COMPILE,\n    course,\n    topic,\n    id,\n    widget\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/redux/actions/code.js","/***********************************************\n * \n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n * \n */\nimport React, {Component} from 'react'\n\n\nimport {SoundMeter} from \"util/SoundMeter\"\n\n\nexport class AudioRecorder extends Component {\n\n  constructor(){\n    super()\n    this.state = {\n      soundValue : 0\n    }\n    \n    this.handleSuccess = this.handleSuccess.bind(this)\n  }\n  componentDidMount(){\n    \n  }\n  \n  start(){\n    console.log(\"start @AudioRecorder\")\n    this.audioContext = new AudioContext()\n    const constraints = {\n      audio: true,\n      video: false\n    }\n    \n    navigator\n      .mediaDevices\n      .getUserMedia(constraints).\n      then(this.handleSuccess)\n      .catch(this.handleError);\n  }\n\n  handleSuccess(stream){\n    // window.stream = stream;\n    const soundMeter = new SoundMeter(this.audioContext);\n    \n    const _s = this\n\n    soundMeter.connectToSource(stream, function(e) {\n      if (e) {\n        alert(e);\n        return;\n      }\n      setInterval(function() {\n        console.log(soundMeter.instant.toFixed(2))\n        _s.setState({\n          soundValue : soundMeter.instant.toFixed(2)\n        })\n      }, 200);\n    }); \n  }\n  \n  handleError(error){\n    console.error(error)\n    \n  }\n  \n  render(){\n      \n    return <div style={{width : '100%', paddingTop : '20px'}}>\n      <div onClick={this.start.bind(this)} style={{height : \"40px\", width : '100%'}}>\n        <i className=\"material-icons\">keyboard_voice</i>\n      </div>\n      <meter style={{width : '100%'}} high=\"0.25\" min=\"0\" max=\"0.3\" value={this.state.soundValue}></meter>\n    </div>\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/AudioRecorder.js","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\n\nexport class SoundMeter{\n\n  constructor(context){\n    this.context = context;\n    this.instant = 0.0;\n    this.slow = 0.0;\n    this.clip = 0.0;\n    this.script = context.createScriptProcessor(2048, 1, 1);\n    var that = this;\n    this.script.onaudioprocess = function(event) {\n      var input = event.inputBuffer.getChannelData(0);\n      var i;\n      var sum = 0.0;\n      var clipcount = 0;\n      for (i = 0; i < input.length; ++i) {\n        sum += input[i] * input[i];\n        if (Math.abs(input[i]) > 0.99) {\n          clipcount += 1;\n        }\n      }\n      that.instant = Math.sqrt(sum / input.length);\n      that.slow = 0.95 * that.slow + 0.05 * that.instant;\n      that.clip = clipcount / input.length;\n    };\n  }\n\n  connectToSource(stream, callback) {\n    console.log('SoundMeter connecting');\n    try {\n      this.mic = this.context.createMediaStreamSource(stream);\n      this.mic.connect(this.script);\n      // necessary to make sample run, but should not be.\n      this.script.connect(this.context.destination);\n      if (typeof callback !== 'undefined') {\n        callback(null);\n      }\n    } catch (e) {\n      console.error(e);\n      if (typeof callback !== 'undefined') {\n        callback(e);\n      }\n    }\n  }\n\n  stop() {\n    this.mic.disconnect();\n    this.script.disconnect();\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/util/SoundMeter.js","/***********************************************\n * \n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\nimport React, {Component} from 'react'\n\n/**\n * 颜色选择器\n * @param pick\n * @param colors\n * @param color\n * @returns {XML}\n * @constructor\n */\nexport const ColorPicker = ({pick, colors, color}) => {\n  return (\n    <div className=\"color\">\n      {colors.map(c => {\n        return <div key={c}\n                    onClick={() => pick(c)}\n                    className={c === 'white' ? 'white' : ''}\n                    style={{backgroundColor : c, borderColor : color == c ? 'black' : \"#eee\"}} ></div>\n      })}\n\n    </div>\n  )\n}\n\n\n// WEBPACK FOOTER //\n// ./app/ColorPicker.js","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\n\nimport {\n  compose,\n  applyMiddleware,\n  createStore,\n  combineReducers\n} from 'redux'\n\nimport {persistStore, autoRehydrate} from 'redux-persist'\n\n/** 引入 Reducer **/\nimport {course} from \"redux/reducers/course\"\n\n/** 引入 middleware **/\n\nimport {socket_recorder} from 'redux/middlewares/socket_recorder'\nimport {browser_hash} from \"redux/middlewares/browser_hash\"\nimport thunk from 'redux-thunk'\n\n/**\n * 创建Redux-Store\n * @returns {*}\n */\n\nexport const init = () => {\n  // 合并Reducer\n  const reducers = {\n    course \n  }\n\n  const reducer = combineReducers(reducers);\n  // 创建Store\n  // 这里是将所有的redux enhancer组合起来\n  const store = applyMiddleware(thunk, socket_recorder, browser_hash)(createStore)(reducer)\n  \n  window.store = store\n  return store\n  \n\n}\n\n\n// WEBPACK FOOTER //\n// ./app/redux/store/init.js","module.exports = (__webpack_require__(2))(187);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/redux/lib/index.js from dll-reference react_7de69c5da675c4deed75\n// module id = 24\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.storages = exports.purgeStoredState = exports.persistStore = exports.getStoredState = exports.createTransform = exports.createPersistor = exports.autoRehydrate = undefined;\n\nvar _asyncLocalStorage = require('./defaults/asyncLocalStorage');\n\nvar _asyncLocalStorage2 = _interopRequireDefault(_asyncLocalStorage);\n\nvar _autoRehydrate = require('./autoRehydrate');\n\nvar _autoRehydrate2 = _interopRequireDefault(_autoRehydrate);\n\nvar _createPersistor = require('./createPersistor');\n\nvar _createPersistor2 = _interopRequireDefault(_createPersistor);\n\nvar _createTransform = require('./createTransform');\n\nvar _createTransform2 = _interopRequireDefault(_createTransform);\n\nvar _getStoredState = require('./getStoredState');\n\nvar _getStoredState2 = _interopRequireDefault(_getStoredState);\n\nvar _persistStore = require('./persistStore');\n\nvar _persistStore2 = _interopRequireDefault(_persistStore);\n\nvar _purgeStoredState = require('./purgeStoredState');\n\nvar _purgeStoredState2 = _interopRequireDefault(_purgeStoredState);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar storageDeprecatedMessage = function storageDeprecatedMessage(type) {\n  return '\\n  To import async' + type + 'Storage please import from \\'redux-persist/storages\\'. For Example:\\n  `import { async' + type + 'Storage } from \\'redux-persist/storages\\'`\\n  or `var async' + type + 'Storage = require(\\'redux-persist/storages\\').async' + type + 'Storage`\\n';\n};\n\nvar storages = {\n  asyncLocalStorage: (0, _asyncLocalStorage2.default)('local', { deprecated: storageDeprecatedMessage('Local') }),\n  asyncSessionStorage: (0, _asyncLocalStorage2.default)('session', { deprecated: storageDeprecatedMessage('Session') })\n};\n\nexports.autoRehydrate = _autoRehydrate2.default;\nexports.createPersistor = _createPersistor2.default;\nexports.createTransform = _createTransform2.default;\nexports.getStoredState = _getStoredState2.default;\nexports.persistStore = _persistStore2.default;\nexports.purgeStoredState = _purgeStoredState2.default;\nexports.storages = storages;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/index.js\n// module id = 25\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = function (type, config) {\n  var deprecated = config && config.deprecated;\n  var storage = getStorage(type);\n  return {\n    getAllKeys: function getAllKeys(cb) {\n      // warn if deprecated\n      if (deprecated) console.warn('redux-persist: ', deprecated);\n\n      return new Promise(function (resolve, reject) {\n        try {\n          var keys = [];\n          for (var i = 0; i < storage.length; i++) {\n            keys.push(storage.key(i));\n          }\n          nextTick(function () {\n            cb && cb(null, keys);\n            resolve(keys);\n          });\n        } catch (e) {\n          cb && cb(e);\n          reject(e);\n        }\n      });\n    },\n    getItem: function getItem(key, cb) {\n      return new Promise(function (resolve, reject) {\n        try {\n          var s = storage.getItem(key);\n          nextTick(function () {\n            cb && cb(null, s);\n            resolve(s);\n          });\n        } catch (e) {\n          cb && cb(e);\n          reject(e);\n        }\n      });\n    },\n    setItem: function setItem(key, string, cb) {\n      return new Promise(function (resolve, reject) {\n        try {\n          storage.setItem(key, string);\n          nextTick(function () {\n            cb && cb(null);\n            resolve();\n          });\n        } catch (e) {\n          cb && cb(e);\n          reject(e);\n        }\n      });\n    },\n    removeItem: function removeItem(key, cb) {\n      return new Promise(function (resolve, reject) {\n        try {\n          storage.removeItem(key);\n          nextTick(function () {\n            cb && cb(null);\n            resolve();\n          });\n        } catch (e) {\n          cb && cb(e);\n          reject(e);\n        }\n      });\n    }\n  };\n};\n\nvar genericSetImmediate = typeof setImmediate === 'undefined' ? global.setImmediate : setImmediate;\nvar nextTick = process && process.nextTick ? process.nextTick : genericSetImmediate;\n\nvar noStorage = process.env.NODE_ENV === 'production' ? function () {\n  /* noop */return null;\n} : function () {\n  console.error('redux-persist asyncLocalStorage requires a global localStorage object. Either use a different storage backend or if this is a universal redux application you probably should conditionally persist like so: https://gist.github.com/rt2zz/ac9eb396793f95ff3c3b');\n  return null;\n};\n\nfunction hasLocalStorage() {\n  var storageExists = void 0;\n  try {\n    storageExists = (typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && !!window.localStorage;\n    if (storageExists) {\n      var testKey = 'redux-persist localStorage test';\n      // @TODO should we also test set and remove?\n      window.localStorage.getItem(testKey);\n    }\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') console.warn('redux-persist localStorage getItem test failed, persistence will be disabled.');\n    return false;\n  }\n  return storageExists;\n}\n\nfunction hasSessionStorage() {\n  try {\n    return (typeof window === 'undefined' ? 'undefined' : _typeof(window)) === 'object' && typeof window.sessionStorage !== 'undefined';\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction getStorage(type) {\n  if (type === 'local') {\n    return hasLocalStorage() ? window.localStorage : { getItem: noStorage, setItem: noStorage, removeItem: noStorage, getAllKeys: noStorage };\n  }\n  if (type === 'session') {\n    return hasSessionStorage() ? window.sessionStorage : { getItem: noStorage, setItem: noStorage, removeItem: noStorage, getAllKeys: noStorage };\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/defaults/asyncLocalStorage.js\n// module id = 26\n// module chunks = 0","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/timers-browserify/main.js\n// module id = 27\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/setimmediate/setImmediate.js\n// module id = 28\n// module chunks = 0","module.exports = (__webpack_require__(2))(3);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/process/browser.js from dll-reference react_7de69c5da675c4deed75\n// module id = 29\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = autoRehydrate;\n\nvar _constants = require('./constants');\n\nvar _isStatePlainEnough = require('./utils/isStatePlainEnough');\n\nvar _isStatePlainEnough2 = _interopRequireDefault(_isStatePlainEnough);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction autoRehydrate() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var stateReconciler = config.stateReconciler || defaultStateReconciler;\n\n  return function (next) {\n    return function (reducer, initialState, enhancer) {\n      var store = next(liftReducer(reducer), initialState, enhancer);\n      return _extends({}, store, {\n        replaceReducer: function replaceReducer(reducer) {\n          return store.replaceReducer(liftReducer(reducer));\n        }\n      });\n    };\n  };\n\n  function liftReducer(reducer) {\n    var rehydrated = false;\n    var preRehydrateActions = [];\n    return function (state, action) {\n      if (action.type !== _constants.REHYDRATE) {\n        if (config.log && !rehydrated) preRehydrateActions.push(action); // store pre-rehydrate actions for debugging\n        return reducer(state, action);\n      } else {\n        if (config.log && !rehydrated) logPreRehydrate(preRehydrateActions);\n        rehydrated = true;\n\n        var inboundState = action.payload;\n        var reducedState = reducer(state, action);\n\n        return stateReconciler(state, inboundState, reducedState, config.log);\n      }\n    };\n  }\n}\n\nfunction logPreRehydrate(preRehydrateActions) {\n  if (preRehydrateActions.length > 0) {\n    console.log('\\n      redux-persist/autoRehydrate: %d actions were fired before rehydration completed. This can be a symptom of a race\\n      condition where the rehydrate action may overwrite the previously affected state. Consider running these actions\\n      after rehydration:\\n    ', preRehydrateActions.length);\n  }\n}\n\nfunction defaultStateReconciler(state, inboundState, reducedState, log) {\n  var newState = _extends({}, reducedState);\n\n  Object.keys(inboundState).forEach(function (key) {\n    // if initialState does not have key, skip auto rehydration\n    if (!state.hasOwnProperty(key)) return;\n\n    // if initial state is an object but inbound state is null/undefined, skip\n    if (_typeof(state[key]) === 'object' && !inboundState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` is falsy but initial state is an object, skipping autoRehydrate.', key);\n      return;\n    }\n\n    // if reducer modifies substate, skip auto rehydration\n    if (state[key] !== reducedState[key]) {\n      if (log) console.log('redux-persist/autoRehydrate: sub state for key `%s` modified, skipping autoRehydrate.', key);\n      newState[key] = reducedState[key];\n      return;\n    }\n\n    // otherwise take the inboundState\n    if ((0, _isStatePlainEnough2.default)(inboundState[key]) && (0, _isStatePlainEnough2.default)(state[key])) newState[key] = _extends({}, state[key], inboundState[key]); // shallow merge\n    else newState[key] = inboundState[key]; // hard set\n\n    if (log) console.log('redux-persist/autoRehydrate: key `%s`, rehydrated to ', key, newState[key]);\n  });\n  return newState;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/autoRehydrate.js\n// module id = 30\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar KEY_PREFIX = exports.KEY_PREFIX = 'reduxPersist:';\nvar REHYDRATE = exports.REHYDRATE = 'persist/REHYDRATE';\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/constants.js\n// module id = 31\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = isStatePlainEnough;\n\nvar _isPlainObject = require('lodash/isPlainObject');\n\nvar _isPlainObject2 = _interopRequireDefault(_isPlainObject);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction isStatePlainEnough(a) {\n  // isPlainObject + duck type not immutable\n  if (!a) return false;\n  if ((typeof a === 'undefined' ? 'undefined' : _typeof(a)) !== 'object') return false;\n  if (typeof a.asMutable === 'function') return false;\n  if (!(0, _isPlainObject2.default)(a)) return false;\n  return true;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/utils/isStatePlainEnough.js\n// module id = 32\n// module chunks = 0","module.exports = (__webpack_require__(2))(189);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/lodash/isPlainObject.js from dll-reference react_7de69c5da675c4deed75\n// module id = 33\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = createPersistor;\n\nvar _constants = require('./constants');\n\nvar _asyncLocalStorage = require('./defaults/asyncLocalStorage');\n\nvar _asyncLocalStorage2 = _interopRequireDefault(_asyncLocalStorage);\n\nvar _purgeStoredState = require('./purgeStoredState');\n\nvar _purgeStoredState2 = _interopRequireDefault(_purgeStoredState);\n\nvar _jsonStringifySafe = require('json-stringify-safe');\n\nvar _jsonStringifySafe2 = _interopRequireDefault(_jsonStringifySafe);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction createPersistor(store, config) {\n  // defaults\n  var serializer = config.serialize === false ? function (data) {\n    return data;\n  } : defaultSerializer;\n  var deserializer = config.serialize === false ? function (data) {\n    return data;\n  } : defaultDeserializer;\n  var blacklist = config.blacklist || [];\n  var whitelist = config.whitelist || false;\n  var transforms = config.transforms || [];\n  var debounce = config.debounce || false;\n  var keyPrefix = config.keyPrefix !== undefined ? config.keyPrefix : _constants.KEY_PREFIX;\n\n  // pluggable state shape (e.g. immutablejs)\n  var stateInit = config._stateInit || {};\n  var stateIterator = config._stateIterator || defaultStateIterator;\n  var stateGetter = config._stateGetter || defaultStateGetter;\n  var stateSetter = config._stateSetter || defaultStateSetter;\n\n  // storage with keys -> getAllKeys for localForage support\n  var storage = config.storage || (0, _asyncLocalStorage2.default)('local');\n  if (storage.keys && !storage.getAllKeys) {\n    storage.getAllKeys = storage.keys;\n  }\n\n  // initialize stateful values\n  var lastState = stateInit;\n  var paused = false;\n  var storesToProcess = [];\n  var timeIterator = null;\n\n  store.subscribe(function () {\n    if (paused) return;\n\n    var state = store.getState();\n\n    stateIterator(state, function (subState, key) {\n      if (!passWhitelistBlacklist(key)) return;\n      if (stateGetter(lastState, key) === stateGetter(state, key)) return;\n      if (storesToProcess.indexOf(key) !== -1) return;\n      storesToProcess.push(key);\n    });\n\n    // time iterator (read: debounce)\n    if (timeIterator === null) {\n      timeIterator = setInterval(function () {\n        if (storesToProcess.length === 0) {\n          clearInterval(timeIterator);\n          timeIterator = null;\n          return;\n        }\n\n        var key = storesToProcess[0];\n        var storageKey = createStorageKey(key);\n        var endState = transforms.reduce(function (subState, transformer) {\n          return transformer.in(subState, key);\n        }, stateGetter(store.getState(), key));\n        if (typeof endState !== 'undefined') storage.setItem(storageKey, serializer(endState), warnIfSetError(key));\n        storesToProcess.shift();\n      }, debounce);\n    }\n\n    lastState = state;\n  });\n\n  function passWhitelistBlacklist(key) {\n    if (whitelist && whitelist.indexOf(key) === -1) return false;\n    if (blacklist.indexOf(key) !== -1) return false;\n    return true;\n  }\n\n  function adhocRehydrate(incoming) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var state = {};\n    if (options.serial) {\n      stateIterator(incoming, function (subState, key) {\n        try {\n          var data = deserializer(subState);\n          var value = transforms.reduceRight(function (interState, transformer) {\n            return transformer.out(interState, key);\n          }, data);\n          state = stateSetter(state, key, value);\n        } catch (err) {\n          if (process.env.NODE_ENV !== 'production') console.warn('Error rehydrating data for key \"' + key + '\"', subState, err);\n        }\n      });\n    } else state = incoming;\n\n    store.dispatch(rehydrateAction(state));\n    return state;\n  }\n\n  function createStorageKey(key) {\n    return '' + keyPrefix + key;\n  }\n\n  // return `persistor`\n  return {\n    rehydrate: adhocRehydrate,\n    pause: function pause() {\n      paused = true;\n    },\n    resume: function resume() {\n      paused = false;\n    },\n    purge: function purge(keys) {\n      return (0, _purgeStoredState2.default)({ storage: storage, keyPrefix: keyPrefix }, keys);\n    }\n  };\n}\n\nfunction warnIfSetError(key) {\n  return function setError(err) {\n    if (err && process.env.NODE_ENV !== 'production') {\n      console.warn('Error storing data for key:', key, err);\n    }\n  };\n}\n\nfunction defaultSerializer(data) {\n  return (0, _jsonStringifySafe2.default)(data, null, null, function (k, v) {\n    if (process.env.NODE_ENV !== 'production') return null;\n    throw new Error('\\n      redux-persist: cannot process cyclical state.\\n      Consider changing your state structure to have no cycles.\\n      Alternatively blacklist the corresponding reducer key.\\n      Cycle encounted at key \"' + k + '\" with value \"' + v + '\".\\n    ');\n  });\n}\n\nfunction defaultDeserializer(serial) {\n  return JSON.parse(serial);\n}\n\nfunction rehydrateAction(data) {\n  return {\n    type: _constants.REHYDRATE,\n    payload: data\n  };\n}\n\nfunction defaultStateIterator(collection, callback) {\n  return Object.keys(collection).forEach(function (key) {\n    return callback(collection[key], key);\n  });\n}\n\nfunction defaultStateGetter(state, key) {\n  return state[key];\n}\n\nfunction defaultStateSetter(state, key, value) {\n  state[key] = value;\n  return state;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/createPersistor.js\n// module id = 34\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = purgeStoredState;\n\nvar _constants = require('./constants');\n\nfunction purgeStoredState(config, keys) {\n  var storage = config.storage;\n  var keyPrefix = config.keyPrefix !== undefined ? config.keyPrefix : _constants.KEY_PREFIX;\n\n  // basic validation\n  if (Array.isArray(config)) throw new Error('redux-persist: purgeStoredState requires config as a first argument (found array). An array of keys is the optional second argument.');\n  if (!storage) throw new Error('redux-persist: config.storage required in purgeStoredState');\n\n  if (typeof keys === 'undefined') {\n    // if keys is not defined, purge all keys\n    return new Promise(function (resolve, reject) {\n      storage.getAllKeys(function (err, allKeys) {\n        if (err && process.env.NODE_ENV !== 'production') {\n          console.warn('redux-persist: error during purgeStoredState in storage.getAllKeys');\n          reject(err);\n        } else {\n          resolve(purgeStoredState(config, allKeys.filter(function (key) {\n            return key.indexOf(keyPrefix) === 0;\n          }).map(function (key) {\n            return key.slice(keyPrefix.length);\n          })));\n        }\n      });\n    });\n  } else {\n    // otherwise purge specified keys\n    return Promise.all(keys.map(function (key) {\n      return storage.removeItem('' + keyPrefix + key, warnIfRemoveError(key));\n    }));\n  }\n}\n\nfunction warnIfRemoveError(key) {\n  return function removeError(err) {\n    if (err && process.env.NODE_ENV !== 'production') {\n      console.warn('Error storing data for key:', key, err);\n    }\n  };\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/purgeStoredState.js\n// module id = 35\n// module chunks = 0","exports = module.exports = stringify\nexports.getSerialize = serializer\n\nfunction stringify(obj, replacer, spaces, cycleReplacer) {\n  return JSON.stringify(obj, serializer(replacer, cycleReplacer), spaces)\n}\n\nfunction serializer(replacer, cycleReplacer) {\n  var stack = [], keys = []\n\n  if (cycleReplacer == null) cycleReplacer = function(key, value) {\n    if (stack[0] === value) return \"[Circular ~]\"\n    return \"[Circular ~.\" + keys.slice(0, stack.indexOf(value)).join(\".\") + \"]\"\n  }\n\n  return function(key, value) {\n    if (stack.length > 0) {\n      var thisPos = stack.indexOf(this)\n      ~thisPos ? stack.splice(thisPos + 1) : stack.push(this)\n      ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key)\n      if (~stack.indexOf(value)) value = cycleReplacer.call(this, key, value)\n    }\n    else stack.push(value)\n\n    return replacer == null ? value : replacer.call(this, key, value)\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-stringify-safe/stringify.js\n// module id = 36\n// module chunks = 0","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction createTransform(inbound, outbound) {\n  var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var whitelist = config.whitelist || null;\n  var blacklist = config.blacklist || null;\n\n  function whitelistBlacklistCheck(key) {\n    if (whitelist && whitelist.indexOf(key) === -1) return true;\n    if (blacklist && blacklist.indexOf(key) !== -1) return true;\n    return false;\n  }\n\n  return {\n    in: function _in(state, key) {\n      return !whitelistBlacklistCheck(key) && inbound ? inbound(state, key) : state;\n    },\n    out: function out(state, key) {\n      return !whitelistBlacklistCheck(key) && outbound ? outbound(state, key) : state;\n    }\n  };\n}\n\nexports.default = createTransform;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/createTransform.js\n// module id = 37\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = getStoredState;\n\nvar _constants = require('./constants');\n\nvar _asyncLocalStorage = require('./defaults/asyncLocalStorage');\n\nvar _asyncLocalStorage2 = _interopRequireDefault(_asyncLocalStorage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getStoredState(config, onComplete) {\n  var storage = config.storage || (0, _asyncLocalStorage2.default)('local');\n  var deserialize = config.deserialize || defaultDeserialize;\n  var blacklist = config.blacklist || [];\n  var whitelist = config.whitelist || false;\n  var transforms = config.transforms || [];\n  var keyPrefix = config.keyPrefix !== undefined ? config.keyPrefix : _constants.KEY_PREFIX;\n\n  // fallback getAllKeys to `keys` if present (LocalForage compatability)\n  if (storage.keys && !storage.getAllKeys) storage = _extends({}, storage, { getAllKeys: storage.keys });\n\n  var restoredState = {};\n  var completionCount = 0;\n\n  storage.getAllKeys(function (err, allKeys) {\n    if (err) {\n      if (process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error in storage.getAllKeys');\n      complete(err);\n    }\n\n    var persistKeys = allKeys.filter(function (key) {\n      return key.indexOf(keyPrefix) === 0;\n    }).map(function (key) {\n      return key.slice(keyPrefix.length);\n    });\n    var keysToRestore = persistKeys.filter(passWhitelistBlacklist);\n\n    var restoreCount = keysToRestore.length;\n    if (restoreCount === 0) complete(null, restoredState);\n    keysToRestore.forEach(function (key) {\n      storage.getItem(createStorageKey(key), function (err, serialized) {\n        if (err && process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error restoring data for key:', key, err);else restoredState[key] = rehydrate(key, serialized);\n        completionCount += 1;\n        if (completionCount === restoreCount) complete(null, restoredState);\n      });\n    });\n  });\n\n  function rehydrate(key, serialized) {\n    var state = null;\n\n    try {\n      var data = deserialize(serialized);\n      state = transforms.reduceRight(function (subState, transformer) {\n        return transformer.out(subState, key);\n      }, data);\n    } catch (err) {\n      if (process.env.NODE_ENV !== 'production') console.warn('redux-persist/getStoredState: Error restoring data for key:', key, err);\n    }\n\n    return state;\n  }\n\n  function complete(err, restoredState) {\n    onComplete(err, restoredState);\n  }\n\n  function passWhitelistBlacklist(key) {\n    if (whitelist && whitelist.indexOf(key) === -1) return false;\n    if (blacklist.indexOf(key) !== -1) return false;\n    return true;\n  }\n\n  function createStorageKey(key) {\n    return '' + keyPrefix + key;\n  }\n\n  if (typeof onComplete !== 'function' && !!Promise) {\n    return new Promise(function (resolve, reject) {\n      onComplete = function onComplete(err, restoredState) {\n        if (err) reject(err);else resolve(restoredState);\n      };\n    });\n  }\n}\n\nfunction defaultDeserialize(serial) {\n  return JSON.parse(serial);\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/getStoredState.js\n// module id = 38\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = persistStore;\n\nvar _constants = require('./constants');\n\nvar _getStoredState = require('./getStoredState');\n\nvar _getStoredState2 = _interopRequireDefault(_getStoredState);\n\nvar _createPersistor = require('./createPersistor');\n\nvar _createPersistor2 = _interopRequireDefault(_createPersistor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// try to source setImmediate as follows: setImmediate (global) -> global.setImmediate -> setTimeout(fn, 0)\nvar genericSetImmediate = typeof setImmediate === 'undefined' ? global.setImmediate || function (fn) {\n  return setTimeout(fn, 0);\n} : setImmediate;\n\nfunction persistStore(store) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var onComplete = arguments[2];\n\n  // defaults\n  // @TODO remove shouldRestore\n  var shouldRestore = !config.skipRestore;\n  if (process.env.NODE_ENV !== 'production' && config.skipRestore) console.warn('redux-persist: config.skipRestore has been deprecated. If you want to skip restoration use `createPersistor` instead');\n\n  var purgeKeys = null;\n\n  // create and pause persistor\n  var persistor = (0, _createPersistor2.default)(store, config);\n  persistor.pause();\n\n  // restore\n  if (shouldRestore) {\n    genericSetImmediate(function () {\n      (0, _getStoredState2.default)(config, function (err, restoredState) {\n        // do not persist state for purgeKeys\n        if (purgeKeys) {\n          if (purgeKeys === '*') restoredState = {};else purgeKeys.forEach(function (key) {\n            return Reflect.deleteProperty(restoredState, key);\n          });\n        }\n\n        store.dispatch(rehydrateAction(restoredState, err));\n        complete(err, restoredState);\n      });\n    });\n  } else genericSetImmediate(complete);\n\n  function complete(err, restoredState) {\n    persistor.resume();\n    onComplete && onComplete(err, restoredState);\n  }\n\n  return _extends({}, persistor, {\n    purge: function purge(keys) {\n      purgeKeys = keys || '*';\n      persistor.purge(keys);\n    }\n  });\n}\n\nfunction rehydrateAction(payload) {\n  var error = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  return {\n    type: _constants.REHYDRATE,\n    payload: payload,\n    error: error\n  };\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/redux-persist/lib/persistStore.js\n// module id = 39\n// module chunks = 0","/***********************************************\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nimport {ACTION_SWITCH_TO, ACTION_SET_COURSE} from \"../actions/course\"\n\n\n\nconst url = new URL(window.location.href)\n\nconst query = qs.parse(url.query.replace(\"?\", \"\")) || {}\nimport URL from 'url-parse'\nimport qs from 'qs'\n\nconst initial = {\n  course : query.course || \"demo\",\n  topic : query.topic,\n  id : query.id,\n  title : null,\n  widgets : {}\n}\n\n\nconst set_widgets = (state, topic, id, widgets) => {\n\n  const newState = {...state}\n  if(!newState['widgets'][topic]){\n    newState['widgets'][topic] = {}\n    if(!newState['widgets'][topic][id]) {\n      newState['widgets'][topic][id] = []\n    }\n  }\n  \n  \n  // let id_start = widgets.length\n  // widgets = widgets.map( (widget, i) => {\n  //   if(!widget) {\n  //    \n  //   }\n  //   widget.id = i\n  //   return widget\n  // })\n  \n  newState[\"widgets\"][topic][id] = widgets\n  return newState\n}\n\n\nconst add_widget = (state, topic, id, widget) => {\n\n  const newState = {...state}\n\n  if(!newState['widgets'][topic]){\n    newState['widgets'][topic] = {}\n    if(!newState['widgets'][topic][id]) {\n      newState['widgets'][topic][id] = []\n    }\n  }\n  if(!widget.id) {\n    widget.id = newState['widgets'][topic][id].length === 0 ? 1 :\n      (newState['widgets'][topic][id][newState['widgets'][topic][id].length - 1].id + 1)\n  }\n  newState['widgets'][topic][id].push(widget)\n  // console.log(\"@add_widget new State\")\n  // console.log(newState)\n  return newState\n  \n}\n\n\n\nconst change_widget = (state, topic, id, {id : widget_id}, x, y, w, h, zIndex) => {\n\n  const newState = {...state}\n\n  const widgets = newState['widgets'][topic][id]\n  \n  const widget = widgets.find(x => x.id === widget_id)\n  widget.x = x\n  widget.y = y\n  widget.w = w\n  widget.h = h\n  widget.zIndex = zIndex\n  \n  // console.log(\"@add_widget new State\")\n  // console.log(newState)\n  return newState\n}\nconst delete_widget = (state, topic, id, widget) => {\n  const newState = {...state}\n  let widgets = newState['widgets'][topic][id]\n  widgets = widgets.filter(x => x.id !== widget.id)\n  newState['widgets'][topic][id] = widgets\n  return newState\n  \n}\n\nexport const course = (state = initial, action) => {\n  switch(action.type) {\n    case ACTION_SET_COURSE : \n      return {...state, course: action.course}\n    case ACTION_SWITCH_TO : \n      return {...state, topic : action.topic, id : action.id, title : action.title ? action.title : state.title}\n    case \"ADD_WIDGET\" : \n      return add_widget(state, action.topic, action.id, action.widget)\n    case \"SET_WIDGETS\" :\n\n      return set_widgets(state, action.topic, action.id, action.widgets)\n    case \"CHANGE_WIDGET\" :\n      return change_widget(state, action.topic, action.id, action.widget, action.x, action.y, action.w, action.h, action.zIndex)\n    \n    case \"DELETE_WIDGET\" :\n\n      return delete_widget(state, action.topic, action.id, action.widget)\n  }\n  return state\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/redux/reducers/course.js","/***********************************************\n * \n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nimport {ACTION_DRAW, ACTION_SET_COLOR, ACTION_CLEAR, ACTION_DRAW_SEGMENT} from \"redux/actions/draw\"\n\nimport {ACTION_SAVE, ACTION_COMPILE} from \"redux/actions/code\"\n\nlet socket = null\nexport function init_socket() {\n  window.socket = socket = io(\"ws://localhost:3006\")\n\n}\nexport const socket_recorder = store => next => action => {\n  \n  switch (action.type) {\n\n    case ACTION_DRAW  :\n      socket.emit(\"draw\", action)\n      break\n\n    case ACTION_CLEAR : \n      socket.emit(\"clear\", action)\n      break\n    case ACTION_DRAW_SEGMENT: \n      socket.emit(\"draw\", action)\n      break\n    case ACTION_SAVE:\n      socket.emit(\"save\", action)\n\n      break\n\n    case ACTION_COMPILE:\n      socket.emit(\"compile\", action)\n      break\n    case \"SAVE_WIDGET\" :\n      const {topic, id} = action\n      socket.emit(\"save-widget\", {...action, widgets : store.getState().course.widgets[topic][id]})\n      break\n    case \"ADD_IMAGE\" :\n      socket.emit(\"add-image\", action)\n      break;\n    case \"SAVE_MARKDOWN\" :\n      socket.emit(\"save-markdown\", action)\n      break\n    case \"DELETE_WIDGET\":\n      socket.emit(\"delete-widget\", action)\n      break\n\n  }\n  \n  return next(action)\n}\n\n\n// WEBPACK FOOTER //\n// ./app/redux/middlewares/socket_recorder.js","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nimport {ACTION_SWITCH_TO} from \"../actions/course\"\n\nexport const browser_hash  = store => next => action => {\n\n  switch(action.type) {\n    case ACTION_SWITCH_TO:\n      window.history.pushState(null, \"Blackboard\", \"/?course=\" + store.getState().course.course + \"&topic=\" + action.topic + \"&id=\" + action.id)\n  }\n\n  return next(action)\n}\n\n\n// WEBPACK FOOTER //\n// ./app/redux/middlewares/browser_hash.js","module.exports = (__webpack_require__(2))(225);\n\n\n//////////////////\n// WEBPACK FOOTER\n// delegated ./node_modules/redux-thunk/lib/index.js from dll-reference react_7de69c5da675c4deed75\n// module id = 43\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/stylus-loader/index.js!./main.styl\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/stylus-loader/index.js!./main.styl\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/stylus-loader/index.js!./main.styl\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/stylus/main.styl\n// module id = 44\n// module chunks = 0","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\n  box-sizing: border-box;\\n  padding: 0;\\n  margin: 0;\\n}\\n#app {\\n  cursor: url(\" + require(\"./img/pen.png\") + \"), auto;\\n}\\n.menu {\\n  position: absolute;\\n  z-index: 1000;\\n  background-color: #fff;\\n  top: 0;\\n  left: -290px;\\n  width: 300px;\\n  border-right: 10px solid #eee;\\n  padding-right: 20px;\\n  transition: left 0.3s ease;\\n}\\n.menu:hover {\\n  border-right: 1px solid #eee;\\n  left: 0;\\n}\\n.menu-item {\\n  color: #333;\\n  font-family: 'Microsoft YaHei';\\n}\\n.menu-item:hover {\\n  font-weight: bold;\\n}\\n.canvas {\\n  position: relative;\\n  z-index: 9;\\n  width: 100%;\\n  height: 100%;\\n  -webkit-touch-callout: none; /* iOS Safari */\\n  -webkit-user-select: none; /* Chrome/Safari/Opera */\\n  -khtml-user-select: none; /* Konqueror */\\n  -moz-user-select: none; /* Firefox */\\n  -ms-user-select: none; /* Internet Explorer/Edge */\\n  user-select: none; /* Non-prefixed version, currently\\n                                  not supported by any browser */\\n}\\n.color {\\n  position: fixed;\\n  right: 5px;\\n  bottom: 0;\\n  z-index: 999;\\n}\\n.color div {\\n  float: left;\\n  width: 50px;\\n  height: 50px;\\n  border: 2px solid #eee;\\n}\\n.cleaner {\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n  padding: 10px;\\n  font-size: 20px;\\n  color: #666;\\n  border: 1px solid #eee;\\n  z-index: 999;\\n}\\n.cleaner:hover {\\n  color: #333;\\n}\\n.eraser {\\n  position: absolute;\\n  width: 50px;\\n  height: 50px;\\n  border-radius: 50%;\\n  border: 1px solid #000;\\n}\\n.pages {\\n  position: absolute;\\n  top: 20px;\\n  left: 50px;\\n  z-index: 999;\\n}\\n.pages .page {\\n  margin-left: 5px;\\n  color: #000;\\n  width: 30px;\\n  height: 30px;\\n  border-radius: 50%;\\n  background-color: #efefef;\\n  line-height: 30px;\\n  text-align: center;\\n  color: #fff;\\n  float: left;\\n}\\n.title {\\n  position: absolute;\\n  left: calc(50% - 250px);\\n  font-size: 28px;\\n  opacity: 0.5;\\n  top: 20px;\\n  width: 500px;\\n  text-align: center;\\n  padding-bottom: 5px;\\n  border-bottom: 1px solid #a4ee97;\\n}\\n.fiddle .frame {\\n  width: 30%;\\n  float: left;\\n  height: 100%;\\n}\\n.fiddle .frame iframe {\\n  width: 100%;\\n}\\n.fiddle .editor {\\n  border-right: 1px solid #eee;\\n  font-size: 20px;\\n  width: 70%;\\n  float: left;\\n  height: 100%;\\n  overflow: hidden;\\n}\\n.fiddle .options {\\n  border-left: 1px solid #eee;\\n  border-right: 1px solid #eee;\\n  display: block;\\n  z-index: 12;\\n  background-color: #f2f3f4;\\n  overflow: hidden;\\n  height: 30px;\\n}\\n.fiddle .options .option {\\n  float: left;\\n  margin-right: 10px;\\n  padding: 3px 10px;\\n  line-height: 30px;\\n}\\n.fiddle .options .option:hover {\\n  color: #0f0;\\n}\\n.dropbox {\\n  position: absolute;\\n  box-sizing: border-box;\\n  overflow: hidden;\\n  top: 0;\\n  left: 0;\\n  z-index: 10;\\n  background-color: #fff;\\n  resize: true;\\n  border: 1px solid #f2f3f4;\\n}\\n.dropbox:hover {\\n  border: 1px solid #eee;\\n}\\n.dropbox:hover .delete {\\n  display: block;\\n}\\n.dropbox .delete {\\n  color: #b5d592;\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n  display: none;\\n  z-index: 999;\\n}\\n.markdown {\\n  width: 100%;\\n  min-width: 300px;\\n  position: relative;\\n}\\n.markdown:hover .btn {\\n  display: block;\\n}\\n.markdown .btn {\\n  position: absolute;\\n  display: none;\\n  width: 20px;\\n  height: 20px;\\n  bottom: 10px;\\n  right: 10px;\\n  color: #b5d592;\\n  text-align: center;\\n  line-height: 20px;\\n}\\n.markdown .markdown-editor {\\n  width: 50%;\\n  float: left;\\n}\\n.markdown .markdown-editor textarea {\\n  width: 100%;\\n  border: none;\\n  outline: none;\\n  height: 100%;\\n}\\n.markdown .preview {\\n  width: 50%;\\n  float: left;\\n  word-wrap: break-word;\\n}\\n.markdown .preview p {\\n  font-size: 1rem;\\n  color: #666;\\n  margin-bottom: 10px;\\n}\\n.markdown .preview h1,\\n.markdown .preview h2,\\n.markdown .preview h3,\\n.markdown .preview h4 {\\n  margin-bottom: 10px;\\n  font-family: \\\"Microsoft YaHei\\\";\\n  color: #333;\\n}\\n.markdown .preview h1 {\\n  font-size: 1.8rem;\\n}\\n.markdown .preview h2 {\\n  font-szie: 1.6rem;\\n}\\n.markdown .preview h3 {\\n  font-size: 1.4rem;\\n}\\n.markdown .preview h4 {\\n  font-size: 1.1rem;\\n}\\n.markdown .preview ul,\\n.markdown .preview ol {\\n  padding-left: 3rem;\\n}\\n.markdown .preview pre {\\n  margin: 10px;\\n  padding: 10px;\\n  background-color: #f2f3f4;\\n}\\n.tools {\\n  position: fixed;\\n  bottom: 0;\\n  z-index: 999;\\n}\\n.tools .tools-btn {\\n  width: 50px;\\n  height: 50px;\\n  text-align: center;\\n  line-height: 50px;\\n  color: #b5d592;\\n  float: left;\\n}\\n.tools .tools-btn:hover i {\\n  color: #0f0;\\n}\\n.tools .tools-btn i {\\n  font-size: 48px;\\n}\\n.clearfix:after {\\n  clear: both;\\n}\\n.drag-area {\\n  height: 4px;\\n  background-color: #eee;\\n}\\n.CodeMirror {\\n  height: 100%;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/stylus-loader!./app/stylus/main.styl\n// module id = 45\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 46\n// module chunks = 0","module.exports = \"data:image/png;base64,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\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/stylus/img/pen.png\n// module id = 47\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 48\n// module chunks = 0","/***********************************************\n *\n * MIT License\n *\n * Copyright (c) 2016 珠峰课堂,Ramroll\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n */\n\nimport {dataTransferItemToBase64} from \"./util/data_helper\"\nimport {Dropbox} from \"./Dropbox\"\nimport {getDimensions} from \"util/dimensions\"\n\nimport md5 from \"md5\"\n/**\n * 处理Paste图片\n * @param event\n * @param blackboard\n */\nexport const paste_handler_factory = (blackboard) => {\n  \n  return async (event) => {\n    \n    \n    if(event.clipboardData){\n      if(event.clipboardData.items.length > 0) {\n\n        const item = event.clipboardData.items[0]\n        switch(item.type) {\n          case \"image/png\" :\n            const {course, topic, id} =  blackboard.props.course\n            const data = await dataTransferItemToBase64(item)\n            const img = new Image()\n            img.src = data\n\n            const maxObj = Dropbox.__maxZIndexObj(topic, id)\n            const {width , height} = getDimensions()\n            img.onload = (event) => {\n              const imgHeight = img.height;\n              const imgWidth = img.width;\n              /**\n               * 增加图片\n               */\n              store.dispatch({\n                type: \"ADD_IMAGE\",\n                course,\n                topic,\n                id,\n                data\n              })\n\n              \n              // 计算最终的长宽\n              let w = imgWidth > width - 160 ? width - 160 : imgWidth\n              \n              const r = w / imgWidth\n              \n              const h = r * imgHeight\n              \n              store.dispatch({\n                type: \"ADD_WIDGET\",\n                widget: {\n                  type: \"image\",\n                  x: 80, y: 80,\n                  w, h,\n                  zIndex: maxObj ? maxObj.state.style.zIndex + 1 : 10,\n                  img: `/courses/${course}/${topic}/${id}_${md5(data)}.png`\n                },\n                topic,\n                id\n              })\n              return true\n            }\n\n            event.preventDefault()\n            event.stopPropagation()\n\n        }\n\n\n        \n\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/paste_handler.js","(function(){\r\n  var crypt = require('crypt'),\r\n      utf8 = require('charenc').utf8,\r\n      isBuffer = require('is-buffer'),\r\n      bin = require('charenc').bin,\r\n\r\n  // The core\r\n  md5 = function (message, options) {\r\n    // Convert to byte array\r\n    if (message.constructor == String)\r\n      if (options && options.encoding === 'binary')\r\n        message = bin.stringToBytes(message);\r\n      else\r\n        message = utf8.stringToBytes(message);\r\n    else if (isBuffer(message))\r\n      message = Array.prototype.slice.call(message, 0);\r\n    else if (!Array.isArray(message))\r\n      message = message.toString();\r\n    // else, assume byte array already\r\n\r\n    var m = crypt.bytesToWords(message),\r\n        l = message.length * 8,\r\n        a =  1732584193,\r\n        b = -271733879,\r\n        c = -1732584194,\r\n        d =  271733878;\r\n\r\n    // Swap endian\r\n    for (var i = 0; i < m.length; i++) {\r\n      m[i] = ((m[i] <<  8) | (m[i] >>> 24)) & 0x00FF00FF |\r\n             ((m[i] << 24) | (m[i] >>>  8)) & 0xFF00FF00;\r\n    }\r\n\r\n    // Padding\r\n    m[l >>> 5] |= 0x80 << (l % 32);\r\n    m[(((l + 64) >>> 9) << 4) + 14] = l;\r\n\r\n    // Method shortcuts\r\n    var FF = md5._ff,\r\n        GG = md5._gg,\r\n        HH = md5._hh,\r\n        II = md5._ii;\r\n\r\n    for (var i = 0; i < m.length; i += 16) {\r\n\r\n      var aa = a,\r\n          bb = b,\r\n          cc = c,\r\n          dd = d;\r\n\r\n      a = FF(a, b, c, d, m[i+ 0],  7, -680876936);\r\n      d = FF(d, a, b, c, m[i+ 1], 12, -389564586);\r\n      c = FF(c, d, a, b, m[i+ 2], 17,  606105819);\r\n      b = FF(b, c, d, a, m[i+ 3], 22, -1044525330);\r\n      a = FF(a, b, c, d, m[i+ 4],  7, -176418897);\r\n      d = FF(d, a, b, c, m[i+ 5], 12,  1200080426);\r\n      c = FF(c, d, a, b, m[i+ 6], 17, -1473231341);\r\n      b = FF(b, c, d, a, m[i+ 7], 22, -45705983);\r\n      a = FF(a, b, c, d, m[i+ 8],  7,  1770035416);\r\n      d = FF(d, a, b, c, m[i+ 9], 12, -1958414417);\r\n      c = FF(c, d, a, b, m[i+10], 17, -42063);\r\n      b = FF(b, c, d, a, m[i+11], 22, -1990404162);\r\n      a = FF(a, b, c, d, m[i+12],  7,  1804603682);\r\n      d = FF(d, a, b, c, m[i+13], 12, -40341101);\r\n      c = FF(c, d, a, b, m[i+14], 17, -1502002290);\r\n      b = FF(b, c, d, a, m[i+15], 22,  1236535329);\r\n\r\n      a = GG(a, b, c, d, m[i+ 1],  5, -165796510);\r\n      d = GG(d, a, b, c, m[i+ 6],  9, -1069501632);\r\n      c = GG(c, d, a, b, m[i+11], 14,  643717713);\r\n      b = GG(b, c, d, a, m[i+ 0], 20, -373897302);\r\n      a = GG(a, b, c, d, m[i+ 5],  5, -701558691);\r\n      d = GG(d, a, b, c, m[i+10],  9,  38016083);\r\n      c = GG(c, d, a, b, m[i+15], 14, -660478335);\r\n      b = GG(b, c, d, a, m[i+ 4], 20, -405537848);\r\n      a = GG(a, b, c, d, m[i+ 9],  5,  568446438);\r\n      d = GG(d, a, b, c, m[i+14],  9, -1019803690);\r\n      c = GG(c, d, a, b, m[i+ 3], 14, -187363961);\r\n      b = GG(b, c, d, a, m[i+ 8], 20,  1163531501);\r\n      a = GG(a, b, c, d, m[i+13],  5, -1444681467);\r\n      d = GG(d, a, b, c, m[i+ 2],  9, -51403784);\r\n      c = GG(c, d, a, b, m[i+ 7], 14,  1735328473);\r\n      b = GG(b, c, d, a, m[i+12], 20, -1926607734);\r\n\r\n      a = HH(a, b, c, d, m[i+ 5],  4, -378558);\r\n      d = HH(d, a, b, c, m[i+ 8], 11, -2022574463);\r\n      c = HH(c, d, a, b, m[i+11], 16,  1839030562);\r\n      b = HH(b, c, d, a, m[i+14], 23, -35309556);\r\n      a = HH(a, b, c, d, m[i+ 1],  4, -1530992060);\r\n      d = HH(d, a, b, c, m[i+ 4], 11,  1272893353);\r\n      c = HH(c, d, a, b, m[i+ 7], 16, -155497632);\r\n      b = HH(b, c, d, a, m[i+10], 23, -1094730640);\r\n      a = HH(a, b, c, d, m[i+13],  4,  681279174);\r\n      d = HH(d, a, b, c, m[i+ 0], 11, -358537222);\r\n      c = HH(c, d, a, b, m[i+ 3], 16, -722521979);\r\n      b = HH(b, c, d, a, m[i+ 6], 23,  76029189);\r\n      a = HH(a, b, c, d, m[i+ 9],  4, -640364487);\r\n      d = HH(d, a, b, c, m[i+12], 11, -421815835);\r\n      c = HH(c, d, a, b, m[i+15], 16,  530742520);\r\n      b = HH(b, c, d, a, m[i+ 2], 23, -995338651);\r\n\r\n      a = II(a, b, c, d, m[i+ 0],  6, -198630844);\r\n      d = II(d, a, b, c, m[i+ 7], 10,  1126891415);\r\n      c = II(c, d, a, b, m[i+14], 15, -1416354905);\r\n      b = II(b, c, d, a, m[i+ 5], 21, -57434055);\r\n      a = II(a, b, c, d, m[i+12],  6,  1700485571);\r\n      d = II(d, a, b, c, m[i+ 3], 10, -1894986606);\r\n      c = II(c, d, a, b, m[i+10], 15, -1051523);\r\n      b = II(b, c, d, a, m[i+ 1], 21, -2054922799);\r\n      a = II(a, b, c, d, m[i+ 8],  6,  1873313359);\r\n      d = II(d, a, b, c, m[i+15], 10, -30611744);\r\n      c = II(c, d, a, b, m[i+ 6], 15, -1560198380);\r\n      b = II(b, c, d, a, m[i+13], 21,  1309151649);\r\n      a = II(a, b, c, d, m[i+ 4],  6, -145523070);\r\n      d = II(d, a, b, c, m[i+11], 10, -1120210379);\r\n      c = II(c, d, a, b, m[i+ 2], 15,  718787259);\r\n      b = II(b, c, d, a, m[i+ 9], 21, -343485551);\r\n\r\n      a = (a + aa) >>> 0;\r\n      b = (b + bb) >>> 0;\r\n      c = (c + cc) >>> 0;\r\n      d = (d + dd) >>> 0;\r\n    }\r\n\r\n    return crypt.endian([a, b, c, d]);\r\n  };\r\n\r\n  // Auxiliary functions\r\n  md5._ff  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & c | ~b & d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._gg  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b & d | c & ~d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._hh  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (b ^ c ^ d) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n  md5._ii  = function (a, b, c, d, x, s, t) {\r\n    var n = a + (c ^ (b | ~d)) + (x >>> 0) + t;\r\n    return ((n << s) | (n >>> (32 - s))) + b;\r\n  };\r\n\r\n  // Package private blocksize\r\n  md5._blocksize = 16;\r\n  md5._digestsize = 16;\r\n\r\n  module.exports = function (message, options) {\r\n    if (message === undefined || message === null)\r\n      throw new Error('Illegal argument ' + message);\r\n\r\n    var digestbytes = crypt.wordsToBytes(md5(message, options));\r\n    return options && options.asBytes ? digestbytes :\r\n        options && options.asString ? bin.bytesToString(digestbytes) :\r\n        crypt.bytesToHex(digestbytes);\r\n  };\r\n\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/md5/md5.js\n// module id = 50\n// module chunks = 0","(function() {\n  var base64map\n      = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n\n  crypt = {\n    // Bit-wise rotation left\n    rotl: function(n, b) {\n      return (n << b) | (n >>> (32 - b));\n    },\n\n    // Bit-wise rotation right\n    rotr: function(n, b) {\n      return (n << (32 - b)) | (n >>> b);\n    },\n\n    // Swap big-endian to little-endian and vice versa\n    endian: function(n) {\n      // If number given, swap endian\n      if (n.constructor == Number) {\n        return crypt.rotl(n, 8) & 0x00FF00FF | crypt.rotl(n, 24) & 0xFF00FF00;\n      }\n\n      // Else, assume array and swap all items\n      for (var i = 0; i < n.length; i++)\n        n[i] = crypt.endian(n[i]);\n      return n;\n    },\n\n    // Generate an array of any length of random bytes\n    randomBytes: function(n) {\n      for (var bytes = []; n > 0; n--)\n        bytes.push(Math.floor(Math.random() * 256));\n      return bytes;\n    },\n\n    // Convert a byte array to big-endian 32-bit words\n    bytesToWords: function(bytes) {\n      for (var words = [], i = 0, b = 0; i < bytes.length; i++, b += 8)\n        words[b >>> 5] |= bytes[i] << (24 - b % 32);\n      return words;\n    },\n\n    // Convert big-endian 32-bit words to a byte array\n    wordsToBytes: function(words) {\n      for (var bytes = [], b = 0; b < words.length * 32; b += 8)\n        bytes.push((words[b >>> 5] >>> (24 - b % 32)) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a hex string\n    bytesToHex: function(bytes) {\n      for (var hex = [], i = 0; i < bytes.length; i++) {\n        hex.push((bytes[i] >>> 4).toString(16));\n        hex.push((bytes[i] & 0xF).toString(16));\n      }\n      return hex.join('');\n    },\n\n    // Convert a hex string to a byte array\n    hexToBytes: function(hex) {\n      for (var bytes = [], c = 0; c < hex.length; c += 2)\n        bytes.push(parseInt(hex.substr(c, 2), 16));\n      return bytes;\n    },\n\n    // Convert a byte array to a base-64 string\n    bytesToBase64: function(bytes) {\n      for (var base64 = [], i = 0; i < bytes.length; i += 3) {\n        var triplet = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n        for (var j = 0; j < 4; j++)\n          if (i * 8 + j * 6 <= bytes.length * 8)\n            base64.push(base64map.charAt((triplet >>> 6 * (3 - j)) & 0x3F));\n          else\n            base64.push('=');\n      }\n      return base64.join('');\n    },\n\n    // Convert a base-64 string to a byte array\n    base64ToBytes: function(base64) {\n      // Remove non-base-64 characters\n      base64 = base64.replace(/[^A-Z0-9+\\/]/ig, '');\n\n      for (var bytes = [], i = 0, imod4 = 0; i < base64.length;\n          imod4 = ++i % 4) {\n        if (imod4 == 0) continue;\n        bytes.push(((base64map.indexOf(base64.charAt(i - 1))\n            & (Math.pow(2, -2 * imod4 + 8) - 1)) << (imod4 * 2))\n            | (base64map.indexOf(base64.charAt(i)) >>> (6 - imod4 * 2)));\n      }\n      return bytes;\n    }\n  };\n\n  module.exports = crypt;\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/crypt/crypt.js\n// module id = 51\n// module chunks = 0","var charenc = {\n  // UTF-8 encoding\n  utf8: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));\n    }\n  },\n\n  // Binary encoding\n  bin: {\n    // Convert a string to a byte array\n    stringToBytes: function(str) {\n      for (var bytes = [], i = 0; i < str.length; i++)\n        bytes.push(str.charCodeAt(i) & 0xFF);\n      return bytes;\n    },\n\n    // Convert a byte array to a string\n    bytesToString: function(bytes) {\n      for (var str = [], i = 0; i < bytes.length; i++)\n        str.push(String.fromCharCode(bytes[i]));\n      return str.join('');\n    }\n  }\n};\n\nmodule.exports = charenc;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/charenc/charenc.js\n// module id = 52\n// module chunks = 0","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nmodule.exports = function (obj) {\n  return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer)\n}\n\nfunction isBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isBuffer(obj.slice(0, 0))\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/is-buffer/index.js\n// module id = 53\n// module chunks = 0"],"sourceRoot":""}